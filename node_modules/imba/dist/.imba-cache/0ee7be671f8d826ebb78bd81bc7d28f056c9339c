{"js":{"code":"function defineName$__(cls,name){\n\tObject.defineProperty(cls,\"name\",{value:name,configurable:true});\n};;\nfunction inheritClass$__(cls){\n\tObject.getPrototypeOf(cls.prototype).constructor?.inherited?.(cls);\n};\nimport {accessor as imba_accessor} from 'imba';\nvar $1 = Symbol('items'), $2 = Symbol(), $3 = Symbol(), $4 = Symbol('name'), $5 = Symbol(), $6 = Symbol(), $8, $10;\nconst $__init__$ = Symbol.for('#__init__'), $__patch__$ = Symbol.for('#__patch__'), $__initor__$ = Symbol.for('#__initor__'), $__inited__$ = Symbol.for('#__inited__'), $__hooks__$ = Symbol.for('#__hooks__');\n\n/*body*/\nimport setup from './setup';\n\nclass Main extends OP.Object {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $7;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($7 = $$.items) !== undefined && this.ααitems.$init($7,this,$1,'items',$$);\n\t\t\n\t}\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();this[$__initor__$]===$3 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααitems.$init($$ ? $$.items : undefined,this,$1,'items',$$);\n\t\t\n\t}\n\tset items(val){ this.ααitems.$set(val,this,$1,'items') }\n\tget items(){ return this.ααitems.$get(this,$1,'items') }\n\tget ααitems(){ return this[$2] || imba_accessor(($8 = this.αitems(),$8),this,$1,'items',$2,Main.prototype) }\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $3;defineName$__(this,'Main');inheritClass$__(this);}\n};\n\nclass Item extends OP.Object {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $9;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($9 = $$.name) !== undefined && this.ααname.$init($9,this,$4,'name',$$);\n\t\t\n\t}\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();this[$__initor__$]===$6 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααname.$init($$ ? $$.name : undefined,this,$4,'name',$$);\n\t\t\n\t}\n\tset name(val){ this.ααname.$set(val,this,$4,'name') }\n\tget name(){ return this.ααname.$get(this,$4,'name') }\n\tget ααname(){ return this[$5] || imba_accessor(($10 = this.αstring(),$10),this,$4,'name',$5,Item.prototype) }\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $6;defineName$__(this,'Item');inheritClass$__(this);}\n};\n\nawait setup(__filename);\n\ntest(\"initial\",async function() {\n\t\n\tlet len = Item.all().length;\n\tif (len != 0) {\n\t\t\n\t\tconsole.log(\"Weird issue here!!\",OP.store.raw,Item.all().map(function(_0) { return _0.id; }));\n\t};\n\tok(Item.all().length,0);\n\tok(Main.all().length,0);\n\t\n\tlet item1 = await Item.create();\n\tlet item2 = await Item.create();\n\tlet item3 = await Item.create();\n\t\n\tlet main = Main.create();\n\tmain.items.push(item1);\n\tmain.items.push(item2);\n\tmain.items.push(item3);\n\t\n\tok(main.items.length,3);\n\tok(main.items[0] === item1);\n\tok(main.items[1] === item2);\n\treturn ok(main.items[2] === item3);\n});\n","dependencies":[],"map":{"version":3,"file":"items.test.js","sourceRoot":"","sources":["/Users/sindre/repos/scrimba/op/test/items.test.imba"],"sourcesContent":["import setup from './setup'\n\nclass Main < OP.Object\n\titems @items\n\nclass Item < OP.Object\n\tname @string\n\nawait setup(__filename)\n\ntest \"initial\" do\n\tlet len = Item.all!.length\n\tif len != 0\n\t\tconsole.log \"Weird issue here!!\",OP.store.raw,Item.all!.map do $1.id\n\tok Item.all!.length, 0\n\tok Main.all!.length, 0\n\n\tlet item1 = await Item.create!\n\tlet item2 = await Item.create!\n\tlet item3 = await Item.create!\n\n\tlet main = Main.create!\n\tmain.items.push item1\n\tmain.items.push item2\n\tmain.items.push item3\n\n\tok main.items.length, 3\n\tok main.items[0] is item1\n\tok main.items[1] is item2\n\tok main.items[2] is item3"],"names":[],"mappings":";;;;;;;;;;;AAAA,MAAM,CAAC,KAAK,MAAM,SAAS;;AAE3B,KAAK,CAAC,IAAI,SAAG,EAAE,CAAC,MAAM,EAAA;qCAFtB;;;qBAGC,KAAK,CAAA;;EAHN;cAAA;;;EAAA;kDAAA;;uCAGC,KAAK;;EAHN;KAGC,KAAK;KAAL,KAAK;KAAL,OAAK,gDAAC,MAAM,EAAA,wBADP,IAAI;;;AACG,CAAA;;AAEb,KAAK,CAAC,IAAI,SAAG,EAAE,CAAC,MAAM,EAAA;qCALtB;;;qBAMC,IAAI,CAAA;;EANL;cAAA;;;EAAA;kDAAA;;sCAMC,IAAI;;EANL;KAMC,IAAI;KAAJ,IAAI;KAAJ,MAAI,iDAAC,OAAO,EAAA,wBADP,IAAI;;;AACG,CAAA;;MAEP,KAAK,CAAC,UAAU,CAAC;;AAEvB,IAAI,CAAC,SAAS,CAAC,cAAE,GAAA;;KACZ,GAAG,GAAG,IAAI,CAAC,GAAG,EAAC,CAAC,MAAM;CAC1B,EAAE,EAAC,GAAG,CAAC,EAAE,CAAC,CAAC,EAAA;;EACV,OAAO,CAAC,GAAG,CAAC,oBAAoB,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,EAAC,CAAC,GAAG,CAAC,QAAE,cAAC,EAAE,CAAC,EAAE,IAAT,CAAA;EAAS;CACrE,EAAE,CAAC,IAAI,CAAC,GAAG,EAAC,CAAC,MAAM,CAAE,CAAC,CAAA;CACtB,EAAE,CAAC,IAAI,CAAC,GAAG,EAAC,CAAC,MAAM,CAAE,CAAC,CAAA;;KAElB,KAAK,SAAS,IAAI,CAAC,MAAM,EAAC;KAC1B,KAAK,SAAS,IAAI,CAAC,MAAM,EAAC;KAC1B,KAAK,SAAS,IAAI,CAAC,MAAM,EAAC;;KAE1B,IAAI,GAAG,IAAI,CAAC,MAAM,EAAC;CACvB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAA;CACrB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAA;CACrB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAA;;CAErB,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAE,CAAC,CAAA;CACvB,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAE,CAAC,KAAK,CAAA;CACzB,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAE,CAAC,KAAK,CAAA;CACzB,OAAA,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAE,CAAC,KAAK,CAAA;CAAA,CAnBtB;AAmBsB;"}},"css":{"code":""},"warnings":[],"errors":[]}
{"js":{"code":"function defineName$__(cls,name){\n\tObject.defineProperty(cls,\"name\",{value:name,configurable:true});\n};;\nfunction inheritClass$__(cls){\n\tObject.getPrototypeOf(cls.prototype).constructor?.inherited?.(cls);\n};\nimport {accessor as imba_accessor} from 'imba';\nvar $1 = Symbol('id'), $2 = Symbol(), $3 = Symbol('pid'), $4 = Symbol(), $5 = Symbol('rss'), $6 = Symbol(), $7 = Symbol('heap'), $8 = Symbol(), $9 = Symbol('logout'), $10 = Symbol(), $11 = Symbol('put'), $12 = Symbol(), $13 = Symbol(), $15, $16, $17, $18, $19, $20;\nconst $__init__$ = Symbol.for('#__init__'), $__patch__$ = Symbol.for('#__patch__'), $__initor__$ = Symbol.for('#__initor__'), $__inited__$ = Symbol.for('#__inited__'), $__hooks__$ = Symbol.for('#__hooks__');\n\n/*body*/\nexport class OPWorker extends OPObject {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $14;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($14 = $$.id) !== undefined && this.ααid.$init($14,this,$1,'id',$$);\n\t\tfields && ($14 = $$.pid) !== undefined && this.ααpid.$init($14,this,$3,'pid',$$);\n\t\tfields && ($14 = $$.rss) !== undefined && this.ααrss.$init($14,this,$5,'rss',$$);\n\t\tfields && ($14 = $$.heap) !== undefined && this.ααheap.$init($14,this,$7,'heap',$$);\n\t\tfields && ($14 = $$.logout) !== undefined && this.ααlogout.$init($14,this,$9,'logout',$$);\n\t\tfields && ($14 = $$.put) !== undefined && this.ααput.$init($14,this,$11,'put',$$);\n\t\t\n\t}\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();this[$__initor__$]===$13 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααid.$init($$ ? $$.id : undefined,this,$1,'id',$$);\n\t\tfields && this.ααpid.$init($$ ? $$.pid : undefined,this,$3,'pid',$$);\n\t\tfields && this.ααrss.$init($$ ? $$.rss : undefined,this,$5,'rss',$$);\n\t\tfields && this.ααheap.$init($$ ? $$.heap : undefined,this,$7,'heap',$$);\n\t\tfields && this.ααlogout.$init($$ ? $$.logout : undefined,this,$9,'logout',$$);\n\t\tfields && this.ααput.$init($$ ? $$.put : undefined,this,$11,'put',$$);\n\t\t\n\t}\n\tset id(val){ this.ααid.$set(val,this,$1,'id') }\n\tget id(){ return this.ααid.$get(this,$1,'id') }\n\tget ααid(){ return this[$2] || imba_accessor(($15 = this.αkey(),($15.system instanceof Function) ? $15.system() : ($15.system = true),$15),this,$1,'id',$2,OPWorker.prototype) }\n\t\n\tset pid(val){ this.ααpid.$set(val,this,$3,'pid') }\n\tget pid(){ return this.ααpid.$get(this,$3,'pid') }\n\tget ααpid(){ return this[$4] || imba_accessor(($16 = this.αnumber(),$16),this,$3,'pid',$4,OPWorker.prototype) }\n\tset rss(val){ this.ααrss.$set(val,this,$5,'rss') }\n\tget rss(){ return this.ααrss.$get(this,$5,'rss') }\n\tget ααrss(){ return this[$6] || imba_accessor(($17 = this.αnumber(),$17),this,$5,'rss',$6,OPWorker.prototype) }\n\tset heap(val){ this.ααheap.$set(val,this,$7,'heap') }\n\tget heap(){ return this.ααheap.$get(this,$7,'heap') }\n\tget ααheap(){ return this[$8] || imba_accessor(($18 = this.αnumber(),$18),this,$7,'heap',$8,OPWorker.prototype) }\n\t\n\tset logout(val){ this.ααlogout.$set(val,this,$9,'logout') }\n\tget logout(){ return this.ααlogout.$get(this,$9,'logout') }\n\tget ααlogout(){ return this[$10] || imba_accessor(($19 = this.αrpc(),$19.callback = function(data) {\n\t\t\n\t\treturn true;\n\t},$19),this,$9,'logout',$10,OPWorker.prototype) }\n\t\n\tset put(val){ this.ααput.$set(val,this,$11,'put') }\n\tget put(){ return this.ααput.$get(this,$11,'put') }\n\tget ααput(){ return this[$12] || imba_accessor(($20 = this.αrpc(),($20.isolate instanceof Function) ? $20.isolate() : ($20.isolate = true),($20.callback instanceof Function) ? $20.callback(async function(data) {\n\t\t\n\t\tif (!(true)) {};\n\t\t\n\t\tlet item = await OP.get(data.id);\n\t\t\n\t\tfor (let $21 = 0, $22 = Object.keys(data), $23 = $22.length, k, v, f; $21 < $23; $21++){\n\t\t\tk = $22[$21];v = data[k];\n\t\t\tif (f = item.$shape[k]) {\n\t\t\t\t\n\t\t\t\titem[k] = v;\n\t\t\t};\n\t\t};\n\t\t\n\t\tlet res = await item.save();\n\t\tlet plain = await item.$serialize();\n\t\t\n\t\treturn plain;\n\t}) : ($20.callback = async function(data) {\n\t\t\n\t\tif (!(true)) {};\n\t\t\n\t\tlet item = await OP.get(data.id);\n\t\t\n\t\tfor (let $21 = 0, $22 = Object.keys(data), $23 = $22.length, k, v, f; $21 < $23; $21++){\n\t\t\tk = $22[$21];v = data[k];k = $22[$21];v = data[k];\n\t\t\tif (f = item.$shape[k]) {\n\t\t\t\t\n\t\t\t\titem[k] = v;\n\t\t\t};\n\t\t};\n\t\t\n\t\tlet res = await item.save();\n\t\tlet plain = await item.$serialize();\n\t\t\n\t\treturn plain;\n\t}),$20),this,$11,'put',$12,OPWorker.prototype) }\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $13;defineName$__(this,'OPWorker');this.alias = 'WRK';\n\t\tinheritClass$__(this);}\n}; globalThis.OPWorker = OPWorker;\n","dependencies":[],"map":{"version":3,"file":"worker.js","sourceRoot":"","sources":["/Users/sindre/repos/scrimba/op/src/types/worker.imba"],"sourcesContent":["export global class OPWorker < OPObject\n\tstatic alias = 'WRK'\n\tid @key.system\n\n\tpid @number\n\trss @number\n\theap @number\n\n\tlogout @rpc do(data)\n\t\tyes\n\n\tput @rpc.isolate do(data)\n\t\treturn unless $node$\n\n\t\tlet item = await OP.get(data.id)\n\n\t\tfor own k,v of data\n\t\t\tif let f = item.$shape[k]\n\t\t\t\titem[k] = v\n\n\t\tlet res = await item.save!\n\t\tlet plain = await item.$serialize!\n\n\t\treturn plain"],"names":[],"mappings":";;;;;;;;;;;AAAA,MAAM,CAAQ,KAAK,CAAC,QAAQ,SAAG,QAAQ,EAAA;qCAAvC;;;sBAEC,EAAE,CAAA;sBAEF,GAAG,CAAA;sBACH,GAAG,CAAA;sBACH,IAAI,CAAA;sBAEJ,MAAM,CAAA;sBAGN,GAAG,CAAA;;EAXJ;cAAA;;;EAAA;kDAAA;;oCAEC,EAAE;qCAEF,GAAG;qCACH,GAAG;sCACH,IAAI;wCAEJ,MAAM;qCAGN,GAAG;;EAXJ;KAEC,EAAE;KAAF,EAAE;KAAF,IAAE,iDAAC,IAAI,EAAA,MAAC,MAAM,4BAAN,MAAM,EAAA,QAAN,MAAM,8BAFK,QAAQ;;KAI3B,GAAG;KAAH,GAAG;KAAH,KAAG,iDAAC,OAAO,EAAA,uBAJQ,QAAQ;KAK3B,GAAG;KAAH,GAAG;KAAH,KAAG,iDAAC,OAAO,EAAA,uBALQ,QAAQ;KAM3B,IAAI;KAAJ,IAAI;KAAJ,MAAI,iDAAC,OAAO,EAAA,wBANO,QAAQ;;KAQ3B,MAAM;KAAN,MAAM;KAAN,QAAM,kDAAC,IAAI,EAAA,gBAAC,QAAE,CAAC,IAAI,EAAC;;EACnB,OAAA,IAAG;EAAA,2BATe,QAAQ;;KAW3B,GAAG;KAAH,GAAG;KAAH,KAAG,kDAAC,IAAI,EAAA,MAAC,OAAO,4BAAP,OAAO,EAAA,QAAP,OAAO,2DAAC,cAAE,CAAC,IAAI,EAAC;;EACjB,EAAM,IAAC,IAAM;;MAEhB,IAAI,SAAS,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC;;EAEhC,GAAG,oFAAgB;;GAClB,EAAE,EAAK,CAAC,GAAG,IAAI,CAAC,MAAM,CAAA,CAAE,CAAC,EAAA;;IACxB,IAAI,CAAA,CAAE,CAAC,GAAG,CAAC;IAAA;GAAA;;MAET,GAAG,SAAS,IAAI,CAAC,IAAI,EAAC;MACtB,KAAK,SAAS,IAAI,CAAC,UAAU,EAAC;;EAElC,MAAM,CAAC,KAAK;EAAA,oBAZI,cAAE,CAAC,IAAI,EAAC;;EACjB,EAAM,IAAC,IAAM;;MAEhB,IAAI,SAAS,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC;;EAEhC,GAAG,oFAAgB;;GAClB,EAAE,EAAK,CAAC,GAAG,IAAI,CAAC,MAAM,CAAA,CAAE,CAAC,EAAA;;IACxB,IAAI,CAAA,CAAE,CAAC,GAAG,CAAC;IAAA;GAAA;;MAET,GAAG,SAAS,IAAI,CAAC,IAAI,EAAC;MACtB,KAAK,SAAS,IAAI,CAAC,UAAU,EAAC;;EAElC,MAAM,CAAC,KAAK;EAAA,0BAvBM,QAAQ;;yEACpB,KAAK,GAAG,KAAK;;AAsBP,cAvBM,QAAQ,GAAR,QAAQ;AAuBd;"}},"css":{"code":""},"warnings":[],"errors":[]}
{"js":{"code":"function defineName$__(cls,name){\n\tObject.defineProperty(cls,\"name\",{value:name,configurable:true});\n};;\nfunction extend$__(target,ext){\n\t// @ts-ignore\n\tconst descriptors = Object.getOwnPropertyDescriptors(ext);\n\tdelete descriptors.constructor;\n\tif(target.extend__ instanceof Function){\n\t\ttarget.extend__(descriptors,ext);\n\t} else {\n\t\t// @ts-ignore\n\t\tObject.defineProperties(target,descriptors);\n\t}\n\treturn target;\n};\nconst $v$ = Symbol.for('#v');\n\n/*body*/\nclass ΩOPObject {\n\t\n\t\n\tget registeredΦ(){\n\t\t\n\t\treturn this.$flags & OPFLAGS.REGISTERED;\n\t}\n\t\n\tget resolvedΦ(){\n\t\t\n\t\tif (this.embedΦ) { return this.$up.resolvedΦ };\n\t\treturn (typeof this.rev === 'number' && !(this.partialΦ) && !(this.$saving)) || this.enumΦ || this.virtualΦ;\n\t}\n\t\n\t// Is object not persisted on server?\n\tget localΦ(){\n\t\tvar $1;\n\t\t\n\t\tif (this.embedΦ) { return this.$up.localΦ };\n\t\treturn 4 > ($1 = this.rev) && $1 > -1;\n\t}\n\t\n\t/**\n\t@returns { boolean }\n\t*/\n\tget savedΦ(){\n\t\t\n\t\t// TODO an embed itself could be saved even if whole object is not\n\t\tif (this.embedΦ) { return this.$up.savedΦ };\n\t\treturn !(this.unsavedΦ);\n\t}\n\t\n\tget savingΦ(){\n\t\t\n\t\treturn !(!(this.$saving));\n\t}\n\t\n\t// Does object has unsaved changes?\n\t/**\n\t@returns { boolean }\n\t*/\n\tget unsavedΦ(){\n\t\t\n\t\tif (this.embedΦ) { return this.$up.unsavedΦ };\n\t\t// How do we actually check for this?\n\t\treturn this.localΦ || (this.$plain !== this.$cloud && this.$plain[$v$]);\n\t}\n\t\n\t// Is object persisted on server?\n\tget persistedΦ(){\n\t\t\n\t\tif (this.embedΦ) { return this.$up.persistedΦ };\n\t\tif (typeof this.rev !== 'number') { return null };\n\t\treturn this.rev >= 4;\n\t}\n\t\n\tget existsΦ(){\n\t\t\n\t\t// Need an exists? like thing for rev >= 0 as well?\n\t\tif (this.embedΦ) { return (!(this.deletedΦ) && this.$up.existsΦ) };\n\t\treturn this.rev > 0 && !((this._del > 0));\n\t}\n\t\n\t// Is object missing from server?\n\tget missingΦ(){\n\t\t\n\t\tif (this.embedΦ) { return this.$up.missingΦ };\n\t\treturn (this.rev < 0) ? true : (((this.rev >= 0) ? false : null));\n\t}\n\t\n\t// Is object marked as deleted?\n\tget deletedΦ(){\n\t\t\n\t\tif (this.embedΦ) { return (this._del > 0 || this.$up.deletedΦ) };\n\t\treturn this._del > 0;\n\t}\n\t\n\tget embedΦ(){\n\t\t\n\t\treturn !(!(this.$up));\n\t}\n\t\n\t// Does object have lazy fields that are not loaded?\n\tget partialΦ(){\n\t\t\n\t\tif (this.embedΦ) { return this.$up.partialΦ };\n\t\treturn false && (!(this.localΦ) && this.$cloud && (this.$cloud._ & OPFLAGS.FULL)==0);\n\t}\n\t\n\t// Is object not registered with parents / collections?\n\tget orphanΦ(){\n\t\t\n\t\tif (this.embedΦ) { return this.$up.orphanΦ };\n\t\treturn this.rev === 0;\n\t}\n\t\n\tget enumΦ(){\n\t\t\n\t\treturn (/^[a-zA-Z]+9/).test(this.id);\n\t}\n\t\n\tget virtualΦ(){\n\t\t\n\t\treturn this.$key ? this.$key.virtual : this.ααid.virtual;\n\t}\n\t\n\tget readableΦ(){\n\t\t\n\t\treturn this.readableΞfor(OP.agent,this.rolesΞfor(OP.agent));\n\t}\n\t\n\tget writableΦ(){\n\t\t\n\t\treturn this.writableΞfor(OP.agent,this.rolesΞfor(OP.agent));\n\t}\n\t\n\tget $resolvedΦ(){\n\t\t\n\t\tthrow \"$resolved? is deprecated\";\n\t}\n\t\n\tget createdΦ(){\n\t\t\n\t\tthrow \"created? is deprecated\";\n\t}\n\t\n\tget cloudΦ(){\n\t\t\n\t\tthrow \"cloud? is deprecated\";\n\t}\n\t\n\tget freshΦ(){\n\t\t\n\t\tthrow \"fresh? is deprecated\";\n\t}\n\tstatic {\n\t\tdefineName$__(this,'OPObject');}\n};\nextend$__(OPObject.prototype,ΩOPObject.prototype);\n;\n","dependencies":[],"map":{"version":3,"file":"predicates.js","sourceRoot":"","sources":["/Users/sindre/repos/scrimba/op/src/core/predicates.imba"],"sourcesContent":["extend class OPObject\n\n\tget registered?\n\t\t$flags & OPFLAGS.REGISTERED\n\n\tget resolved?\n\t\treturn $up.resolved? if embed?\n\t\t(typeof rev is 'number' and !partial? and !$saving) or enum? or virtual?\n\n\t# Is object not persisted on server?\n\tget local?\n\t\treturn $up.local? if embed?\n\t\t4 > rev > -1\n\n\tget saved?\\boolean\n\t\t# TODO an embed itself could be saved even if whole object is not\n\t\treturn $up.saved? if embed?\n\t\t!unsaved?\n\n\tget saving?\n\t\t!!$saving\n\n\t# Does object has unsaved changes?\n\tget unsaved?\\boolean\n\t\treturn $up.unsaved? if embed?\n\t\t# How do we actually check for this?\n\t\tlocal? or ($plain isnt $cloud and $plain.#v)\n\n\t# Is object persisted on server?\n\tget persisted?\n\t\treturn $up.persisted? if embed?\n\t\treturn null if typeof rev isnt 'number'\n\t\trev >= 4\n\n\tget exists?\n\t\t# Need an exists? like thing for rev >= 0 as well?\n\t\treturn (!deleted? and $up.exists?) if embed?\n\t\trev > 0 and !(_del > 0)\n\n\t# Is object missing from server?\n\tget missing?\n\t\treturn $up.missing? if embed?\n\t\trev < 0 ? yes : (rev >= 0 ? no : null)\n\n\t# Is object marked as deleted?\n\tget deleted?\n\t\treturn (_del > 0 or $up.deleted?) if embed?\n\t\t_del > 0\n\n\tget embed?\n\t\t!!$up\n\n\t# Does object have lazy fields that are not loaded?\n\tget partial?\n\t\treturn $up.partial? if embed?\n\t\t$web$ and (!local? and $cloud and $cloud._ !& OPFLAGS.FULL)\n\n\t# Is object not registered with parents / collections?\n\tget orphan?\n\t\treturn $up.orphan? if embed?\n\t\trev is 0\n\n\tget enum?\n\t\t(/^[a-zA-Z]+9/).test(id)\n\n\tget virtual?\n\t\t$key ? $key.virtual : @@id.virtual\n\n\tget readable?\n\t\treadable-for OP.agent, roles-for(OP.agent)\n\n\tget writable?\n\t\twritable-for OP.agent, roles-for(OP.agent)\n\n\tget $resolved?\n\t\tthrow \"$resolved? is deprecated\"\n\n\tget created?\n\t\tthrow \"created? is deprecated\"\n\n\tget cloud?\n\t\tthrow \"cloud? is deprecated\"\n\n\tget fresh?\n\t\tthrow \"fresh? is deprecated\"\n"],"names":[],"mappings":"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"}},"css":{"code":""},"warnings":[],"errors":[]}
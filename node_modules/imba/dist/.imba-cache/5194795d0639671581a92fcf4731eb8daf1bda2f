{"js":{"code":"function defineName$__(cls,name){\n\tObject.defineProperty(cls,\"name\",{value:name,configurable:true});\n};;\nfunction inheritClass$__(cls){\n\tObject.getPrototypeOf(cls.prototype).constructor?.inherited?.(cls);\n};\nimport {accessor as imba_accessor} from 'imba';\nvar $1 = Symbol('name'), $2 = Symbol(), $3 = Symbol('owners'), $4 = Symbol(), $5 = Symbol('courses'), $6 = Symbol(), $7 = Symbol(), $8 = Symbol('name'), $9 = Symbol(), $10 = Symbol('creator'), $11 = Symbol(), $12 = Symbol('lns'), $13 = Symbol(), $14 = Symbol('owners'), $15 = Symbol(), $16 = Symbol('private'), $17 = Symbol(), $18 = Symbol(), $19 = Symbol('cues'), $20 = Symbol(), $21 = Symbol('metadata'), $22 = Symbol(), $23 = Symbol(), $25, $26, $27, $29, $30, $31, $32, $33, $35, $37;\nconst $__init__$ = Symbol.for('#__init__'), $__patch__$ = Symbol.for('#__patch__'), $__initor__$ = Symbol.for('#__initor__'), $__inited__$ = Symbol.for('#__inited__'), $__hooks__$ = Symbol.for('#__hooks__');\n\n/*body*/\nimport setup from './setup';\n\nclass User extends OPUser {\n\t\n\tstatic {\n\t\tdefineName$__(this,'User');this.alias = 'u';\n\t\tinheritClass$__(this);}\n};\n\nclass Hub extends OPObject {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $24;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($24 = $$.name) !== undefined && this.ααname.$init($24,this,$1,'name',$$);\n\t\tfields && ($24 = $$.owners) !== undefined && this.ααowners.$init($24,this,$3,'owners',$$);\n\t\tfields && ($24 = $$.courses) !== undefined && this.ααcourses.$init($24,this,$5,'courses',$$);\n\t\t\n\t}\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();this[$__initor__$]===$7 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααname.$init($$ ? $$.name : undefined,this,$1,'name',$$);\n\t\tfields && this.ααowners.$init($$ ? $$.owners : undefined,this,$3,'owners',$$);\n\t\tfields && this.ααcourses.$init($$ ? $$.courses : undefined,this,$5,'courses',$$);\n\t\t\n\t}\n\tset name(val){ this.ααname.$set(val,this,$1,'name') }\n\tget name(){ return this.ααname.$get(this,$1,'name') }\n\tget ααname(){ return this[$2] || imba_accessor(($25 = this.αstring(),$25),this,$1,'name',$2,Hub.prototype) }\n\tset owners(val){ this.ααowners.$set(val,this,$3,'owners') }\n\tget owners(){ return this.ααowners.$get(this,$3,'owners') }\n\tget ααowners(){ return this[$4] || imba_accessor(($26 = this.αzset(User),($26.as instanceof Function) ? $26.as(OP.OWNER) : ($26.as = OP.OWNER),($26.w instanceof Function) ? $26.w(OP.OWNER) : ($26.w = OP.OWNER),$26),this,$3,'owners',$4,Hub.prototype) }\n\tset courses(val){ this.ααcourses.$set(val,this,$5,'courses') }\n\tget courses(){ return this.ααcourses.$get(this,$5,'courses') }\n\tget ααcourses(){ return this[$6] || imba_accessor(($27 = this.αchildren(Course),($27.w instanceof Function) ? $27.w(OP.OWNER) : ($27.w = OP.OWNER),$27),this,$5,'courses',$6,Hub.prototype) }\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $7;defineName$__(this,'Hub');this.alias = 'h';\n\t\tinheritClass$__(this);}\n};\n\nclass Content extends OPObject {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $28;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($28 = $$.name) !== undefined && this.ααname.$init($28,this,$8,'name',$$);\n\t\tfields && ($28 = $$.creator) !== undefined && this.ααcreator.$init($28,this,$10,'creator',$$);\n\t\tfields && ($28 = $$.lns) !== undefined && this.ααlns.$init($28,this,$12,'lns',$$);\n\t\tfields && ($28 = $$.owners) !== undefined && this.ααowners.$init($28,this,$14,'owners',$$);\n\t\tfields && ($28 = $$.private) !== undefined && this.ααprivate.$init($28,this,$16,'private',$$);\n\t\t\n\t}\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();this[$__initor__$]===$18 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααname.$init($$ ? $$.name : undefined,this,$8,'name',$$);\n\t\tfields && this.ααcreator.$init($$ ? $$.creator : undefined,this,$10,'creator',$$);\n\t\tfields && this.ααlns.$init($$ ? $$.lns : undefined,this,$12,'lns',$$);\n\t\tfields && this.ααowners.$init($$ ? $$.owners : undefined,this,$14,'owners',$$);\n\t\tfields && this.ααprivate.$init($$ ? $$.private : undefined,this,$16,'private',$$);\n\t\t\n\t}\n\tset name(val){ this.ααname.$set(val,this,$8,'name') }\n\tget name(){ return this.ααname.$get(this,$8,'name') }\n\tget ααname(){ return this[$9] || imba_accessor(($29 = this.αstring(),($29.w instanceof Function) ? $29.w(OP.OWNER | OP.CREATOR) : ($29.w = OP.OWNER | OP.CREATOR),$29),this,$8,'name',$9,Content.prototype) }\n\tset creator(val){ this.ααcreator.$set(val,this,$10,'creator') }\n\tget creator(){ return this.ααcreator.$get(this,$10,'creator') }\n\tget ααcreator(){ return this[$11] || imba_accessor(($30 = this.αref(OP.User),($30.as instanceof Function) ? $30.as(OP.CREATOR) : ($30.as = OP.CREATOR),$30.default = function() {\n\t\treturn OP.user;\n\t},$30),this,$10,'creator',$11,Content.prototype) }\n\tset lns(val){ this.ααlns.$set(val,this,$12,'lns') }\n\tget lns(){ return this.ααlns.$get(this,$12,'lns') }\n\tget ααlns(){ return this[$13] || imba_accessor(($31 = this.αparents(OPObject),$31),this,$12,'lns',$13,Content.prototype) }\n\tset owners(val){ this.ααowners.$set(val,this,$14,'owners') }\n\tget owners(){ return this.ααowners.$get(this,$14,'owners') }\n\tget ααowners(){ return this[$15] || imba_accessor(($32 = this.αzset(User),($32.as instanceof Function) ? $32.as(OP.OWNER) : ($32.as = OP.OWNER),$32),this,$14,'owners',$15,Content.prototype) }\n\tset private(val){ this.ααprivate.$set(val,this,$16,'private') }\n\tget private(){ return this.ααprivate.$get(this,$16,'private') }\n\tget ααprivate(){ return this[$17] || imba_accessor(($33 = this.αtoggle(),($33.w instanceof Function) ? $33.w(OP.OWNER) : ($33.w = OP.OWNER),$33),this,$16,'private',$17,Content.prototype) }\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $18;defineName$__(this,'Content');inheritClass$__(this);}\n};\n\nclass Course extends Content {\n\t\n\treadableΞfor(user,roles,deep){\n\t\t\n\t\treturn this.private ? (roles & (OP.OWNER | OP.MEMBER)) : (super.readableΞfor(...arguments));\n\t}\n\tstatic {\n\t\tdefineName$__(this,'Course');this.alias = 'c';\n\t\tinheritClass$__(this);}\n};\n\nclass Scrim extends Content {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $34;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($34 = $$.cues) !== undefined && this.ααcues.$init($34,this,$19,'cues',$$);\n\t\t\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααcues.$init($$ ? $$.cues : undefined,this,$19,'cues',$$);\n\t\t\n\t}\n\tset cues(val){ this.ααcues.$set(val,this,$19,'cues') }\n\tget cues(){ return this.ααcues.$get(this,$19,'cues') }\n\tget ααcues(){ return this[$20] || imba_accessor(($35 = this.αobject(),($35.lazy instanceof Function) ? $35.lazy() : ($35.lazy = true),$35),this,$19,'cues',$20,Scrim.prototype) }\n\tstatic {\n\t\tdefineName$__(this,'Scrim');this.alias = 's';\n\t\tinheritClass$__(this);}\n};\n\nclass MediaStreamRecording extends OPObject {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $36;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($36 = $$.metadata) !== undefined && this.ααmetadata.$init($36,this,$21,'metadata',$$);\n\t\t\n\t}\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();this[$__initor__$]===$23 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααmetadata.$init($$ ? $$.metadata : undefined,this,$21,'metadata',$$);\n\t\t\n\t}\n\tset metadata(val){ this.ααmetadata.$set(val,this,$21,'metadata') }\n\tget metadata(){ return this.ααmetadata.$get(this,$21,'metadata') }\n\tget ααmetadata(){ return this[$22] || imba_accessor(($37 = this.αobject(),$37),this,$21,'metadata',$22,MediaStreamRecording.prototype) }\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $23;defineName$__(this,'MediaStreamRecording');this.alias = 'msr';\n\t\tinheritClass$__(this);}\n};\n\nawait setup(__filename,{data: {\n\tu02: {name: 'Sindre'},\n\tu03: {name: 'Per'},\n\tu04: {name: 'Magnus'},\n\tu05: {name: 'Rando'},\n\th01: {name: 'Scrimba',owners: {u02: 1}},\n\th02: {name: 'Coursera',owners: {u03: 1}},\n\tc01: {name: 'AI Apps',owners: {u03: 1},lns: {h01: 1}},\n\ts011: {name: 'Scrim',lns: {c01: 10},cues: {a: 1,b: 2}},\n\ts012: {name: 'Scrim',lns: {c01: 20},cues: {a: 1,b: 2}},\n\tc02: {name: 'Imba Launch',private: 1,owners: {u02: 1},lns: {h01: 2}},\n\ts021: {name: 'Scrim',lns: {c02: 10}},\n\ts022: {name: 'Scrim',lns: {c02: 20}},\n\ts001: {name: 'Bootcamp Offer',lns: {c01: 5,c02: 5}}\n}});\n\n\n\nOP.pub(OP.Hub,function(sub,hub) {\n\t\n\treturn sub.add(hub,sub.ALL);\n});\n\nOP.pub(OP.Scrim,function(sub,item) {\n\t\n\treturn sub.add(item,sub.ALL | sub.FULL);\n});\n\nOP.pub(OP.User,function(sub,item) {\n\t\n\t// could base it on time\n\treturn console.log(\"%s %s\",'\u001b[90m::\u001b[0m','\u001b[40m\u001b[32m\\'pub all pov props for user?\\'\u001b[0m');\n});\n;\n\n\ndescribe(\"permissions\",function() {\n\t\n\ttest.web(\"pov\",function({u04: u04}) { return u04.run(function() {\n\t\t\n\t\treturn ok(OP.user.name,'Magnus');\n\t}); });\n\t\n\ttest.web(\"can create in hub\",function({h01: h01,u02: u02}) { return u02.run(async function() {\n\t\t\n\t\tok(OP.user,u02);\n\t\tlet course = OP.Course.build({name: \"My course\",lns: [h01]});\n\t\t// all pov data has to be fetched here\n\t\tconsole.log(\"%s %s %O\",'\u001b[90m::\u001b[0m','\u001b[44m\u001b[97mh01.$pov(u02).$roles\u001b[0m',h01.$pov(u02).$roles);\n\t\t// TODO add \n\t\tok(h01.rolesΞfor(u02) & OP.OWNER);\n\t\t// L 'saving?',course.$plain\n\t\t// ok 1,0\n\t\tok(await course.save());\n\t\treturn ok(course.creator,u02);\n\t\t// await expect(course.save!).re\n\t}); });\n\t\n\ttest(\"cannot create in hub\",function({h01: h01,u04: u04}) { return u04.run(function() {\n\t\t\n\t\tlet course = OP.Course.build({name: \"My course\",lns: [h01]});\n\t\tok((h01.rolesΞfor(u04) & OP.OWNER)==0);\n\t\tok(course.rolesΞfor(u04) & OP.CREATOR);\n\t\tok(course.$parents.has(h01));\n\t\treturn ok(!(course.writableΞfor(u04)));\n\t\t// Should not allow to save course since u04 is not owner\n\t\t// of hub, and hub.courses can only be written to by owners.\n\t\t\n\t\t// more difficult to run on client and server at once?\n\t\t// await expect(course.save!).rejects.toThrowError!\n\t}); });\n\t\n\treturn test.node(\"can edit hub later\",async function({h01: h01,u02: u02,u04: u04,u05: u05}) {\n\t\t\n\t\tlet course;\n\t\tawait u02.run(async function() {\n\t\t\t\n\t\t\tcourse = OP.Course.build({name: \"My course\",lns: [h01],owners: [u04]});\n\t\t\tok(course.rolesΞfor(u02) & OP.CREATOR);\n\t\t\tok(course.rolesΞfor(u04) & OP.OWNER);\n\t\t\tok((course.rolesΞfor(u05) & OP.OWNER)==0);\n\t\t\treturn ok(await course.save());\n\t\t});\n\t\t\n\t\t// u05 should not be allowed to save\n\t\tawait u05.run(async function() {\n\t\t\t\n\t\t\t// Trying to update without access should fail\n\t\t\treturn await expect(course.update({name: \"Other course\"})).rejects.toThrowError(OPNotAllowed);\n\t\t});\n\t\t\n\t\tawait u04.run(async function() {\n\t\t\t\n\t\t\t// u04 is allowed to edit the name \n\t\t\tawait course.update({name: \"Other course\"});\n\t\t\treturn ok(course.$cloud.name,\"Other course\");\n\t\t});\n\t\t\n\t\treturn await u04.run(async function() {\n\t\t\t\n\t\t\t// But not allowed to change\n\t\t\t\n\t\t\tawait course.update({name: \"Other course\"});\n\t\t\treturn ok(course.$cloud.name,\"Other course\");\n\t\t});\n\t});\n});\n\ndescribe(\"publications\",function() {\n\t\n\ttest.node(\"respect private\",async function({h01: h01,u02: u02,u05: u05,c02: c02,s022: s022}) {\n\t\t\n\t\tawait u02.run(async function() {\n\t\t\t\n\t\t\tlet sub = await OP.sub(h01);\n\t\t\tok(sub.has(c02));\n\t\t\treturn ok(sub.has(s022));\n\t\t});\n\t\t\n\t\tawait u05.run(async function() {\n\t\t\t\n\t\t\t// c02 is private, so s05 won't have access to it\n\t\t\tlet sub = await OP.sub(h01);\n\t\t\tok(!(sub.has(c02)));\n\t\t\treturn ok(!(sub.has(s022)));\n\t\t});\n\t\t\n\t\t// update privacy\n\t\tawait c02.$setraw({private: 0});\n\t\t\n\t\treturn await u05.run(async function() {\n\t\t\t\n\t\t\t// now that it is public we have access again\n\t\t\tlet sub = await OP.sub(h01);\n\t\t\tok(sub.has(c02));\n\t\t\treturn ok(sub.has(s022));\n\t\t});\n\t});\n\t\n\treturn test.node(\"lazy fields\",async function({h01: h01,u02: u02,u05: u05,c02: c02,s011: s011,s022: s022}) {\n\t\t\n\t\tawait u02.run(async function() {\n\t\t\t\n\t\t\tlet sub = await OP.sub(h01);\n\t\t\tok((sub.get('s011')._ & OPFLAGS.FULL)==0);\n\t\t\treturn ok(sub.get('s021')._ & OPFLAGS.FULL);\n\t\t});\n\t\t\n\t\treturn await u02.run(async function() {\n\t\t\t\n\t\t\tlet sub = await OP.sub(s011);\n\t\t\treturn ok(sub.get('s011')._ & OPFLAGS.FULL);\n\t\t});\n\t});\n});\n","dependencies":[],"map":{"version":3,"file":"courses.test.js","sourceRoot":"","sources":["/Users/sindre/repos/scrimba/op/test/courses.test.imba"],"sourcesContent":["import setup from './setup'\n\nclass User < OPUser\n\tstatic alias = 'u'\n\nclass Hub < OPObject\n\tstatic alias = 'h'\n\tname @string\n\towners @zset(User).as(OP.OWNER).w(OP.OWNER)\n\tcourses @children(Course).w(OP.OWNER)\n\nclass Content < OPObject\n\tname @string.w(OP.OWNER | OP.CREATOR)\n\tcreator @ref(OP.User).as(OP.CREATOR) = OP.user\n\tlns @parents(OPObject)\n\towners @zset(User).as(OP.OWNER)\n\tprivate @toggle.w(OP.OWNER)\n\nclass Course < Content\n\tstatic alias = 'c'\n\n\tdef readable-for user, roles, deep\n\t\tprivate ? roles & (OP.OWNER | OP.MEMBER) : super\n\nclass Scrim < Content\n\tstatic alias = 's'\n\n\tcues @object.lazy\n\nclass MediaStreamRecording < OPObject\n\tstatic alias = 'msr'\n\tmetadata @object\n\nawait setup(__filename, data: {\n\tu02: {name: 'Sindre'}\n\tu03: {name: 'Per'}\n\tu04: {name: 'Magnus'}\n\tu05: {name: 'Rando'}\n\th01: {name: 'Scrimba', owners: {u02: 1}}\n\th02: {name: 'Coursera', owners: {u03: 1}}\n\tc01: {name: 'AI Apps', owners: {u03: 1}, lns: {h01: 1}}\n\ts011: {name: 'Scrim', lns: {c01: 10}, cues: {a:1,b:2}}\n\ts012: {name: 'Scrim', lns: {c01: 20}, cues: {a:1,b:2}}\n\tc02: {name: 'Imba Launch', private: 1, owners: {u02: 1}, lns: {h01: 2}}\n\ts021: {name: 'Scrim', lns: {c02: 10}}\n\ts022: {name: 'Scrim', lns: {c02: 20}}\n\ts001: {name: 'Bootcamp Offer', lns: {c01: 5, c02: 5}}\n})\n\nif $node$\n\tOP.pub(OP.Hub) do(sub,hub)\n\t\tsub.add(hub,sub.ALL)\n\n\tOP.pub(OP.Scrim) do(sub,item)\n\t\tsub.add(item,sub.ALL | sub.FULL)\n\n\tOP.pub(OP.User) do(sub,item)\n\t\t# could base it on time\n\t\tL 'pub all pov props for user?'\n\n\ndescribe \"permissions\" do\n\ttest.web \"pov\" do({u04}) u04.run do\n\t\tok OP.user.name,'Magnus'\n\n\ttest.web \"can create in hub\" do({h01,u02}) u02.run do\n\t\tok OP.user,u02\n\t\tlet course = OP.Course.build(name: \"My course\", lns: [h01])\n\t\t# all pov data has to be fetched here\n\t\tL h01.$pov(u02).$roles\n\t\t# TODO add \n\t\tok h01.roles-for(u02) & OP.OWNER\n\t\t# L 'saving?',course.$plain\n\t\t# ok 1,0\n\t\tok await course.save!\n\t\tok course.creator,u02\n\t\t# await expect(course.save!).re\n\n\ttest \"cannot create in hub\" do({h01,u04}) u04.run do\n\t\tlet course = OP.Course.build(name: \"My course\", lns: [h01])\n\t\tok h01.roles-for(u04) !& OP.OWNER\n\t\tok course.roles-for(u04) & OP.CREATOR\n\t\tok course.$parents.has(h01)\n\t\tok !course.writable-for(u04)\n\t\t# Should not allow to save course since u04 is not owner\n\t\t# of hub, and hub.courses can only be written to by owners.\n\n\t\t# more difficult to run on client and server at once?\n\t\t# await expect(course.save!).rejects.toThrowError!\n\n\ttest.node \"can edit hub later\" do({h01,u02,u04,u05})\n\t\tlet course\n\t\tawait u02.run do\n\t\t\tcourse = OP.Course.build(name: \"My course\", lns: [h01], owners: [u04])\n\t\t\tok course.roles-for(u02) & OP.CREATOR\n\t\t\tok course.roles-for(u04) & OP.OWNER\n\t\t\tok course.roles-for(u05) !& OP.OWNER\n\t\t\tok await course.save!\n\n\t\t# u05 should not be allowed to save\n\t\tawait u05.run do\n\t\t\t# Trying to update without access should fail\n\t\t\tawait expect(course.update(name: \"Other course\")).rejects.toThrowError(OPNotAllowed)\n\n\t\tawait u04.run do\n\t\t\t# u04 is allowed to edit the name \n\t\t\tawait course.update(name: \"Other course\")\n\t\t\tok course.$cloud.name,\"Other course\"\n\n\t\tawait u04.run do\n\t\t\t# But not allowed to change\n\n\t\t\tawait course.update(name: \"Other course\")\n\t\t\tok course.$cloud.name,\"Other course\"\n\ndescribe \"publications\" do\n\ttest.node \"respect private\" do({h01,u02,u05,c02,s022})\n\t\tawait u02.run do\n\t\t\tlet sub = await OP.sub(h01)\n\t\t\tok sub.has(c02)\n\t\t\tok sub.has(s022)\n\n\t\tawait u05.run do\n\t\t\t# c02 is private, so s05 won't have access to it\n\t\t\tlet sub = await OP.sub(h01)\n\t\t\tok !sub.has(c02)\n\t\t\tok !sub.has(s022)\n\n\t\t# update privacy\n\t\tawait c02.$setraw(private: 0)\n\n\t\tawait u05.run do\n\t\t\t# now that it is public we have access again\n\t\t\tlet sub = await OP.sub(h01)\n\t\t\tok sub.has(c02)\n\t\t\tok sub.has(s022)\n\n\ttest.node \"lazy fields\" do({h01,u02,u05,c02,s011,s022})\n\t\tawait u02.run do\n\t\t\tlet sub = await OP.sub(h01)\n\t\t\tok sub.get('s011')._ !& OPFLAGS.FULL\n\t\t\tok sub.get('s021')._ & OPFLAGS.FULL\n\n\t\tawait u02.run do\n\t\t\tlet sub = await OP.sub(s011)\n\t\t\tok sub.get('s011')._ & OPFLAGS.FULL\n"],"names":[],"mappings":"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"}},"css":{"code":""},"warnings":[],"errors":[]}
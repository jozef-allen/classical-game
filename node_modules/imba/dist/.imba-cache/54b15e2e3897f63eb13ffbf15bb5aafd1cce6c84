{"js":{"code":"function defineName$__(cls,name){\n\tObject.defineProperty(cls,\"name\",{value:name,configurable:true});\n};;\nfunction inheritClass$__(cls){\n\tObject.getPrototypeOf(cls.prototype).constructor?.inherited?.(cls);\n};\nconst $__init__$ = Symbol.for('#__init__'), $__patch__$ = Symbol.for('#__patch__'), $__initor__$ = Symbol.for('#__initor__'), $__inited__$ = Symbol.for('#__inited__'), $__hooks__$ = Symbol.for('#__hooks__');\nvar $1 = Symbol(), $2 = Symbol();\n\n/*body*/\n\nimport * as msgpack from './msgpack';\n\nconst p = console.log.bind(console);\n\nlet msgcounter = 100;\n\nexport * from './msgpack';\n\nexport function αrpc(target,key,desc){\n\tlet fn;\n\t\n\t\n\tif (fn = desc.value) {\n\t\t\n\t\tlet wrapper = function(...params) {\n\t\t\t\n\t\t\t\n\t\t\tlet ctx = params[0];\n\t\t\tlet res;\n\t\t\t// this is the local source\n\t\t\tif (ctx == this || ctx == OP || ctx == null || (ctx instanceof Message)) {\n\t\t\t\t\n\t\t\t\tres = fn.call(this,...params);\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tres = new Message(\n\t\t\t\t\t{_cre: OP?.now,\n\t\t\t\t\tsrc: globalThis.OP,\n\t\t\t\t\tdst: ctx,\n\t\t\t\t\ttarget: this,\n\t\t\t\t\taction: key,\n\t\t\t\t\tparams: params.slice(1)}\n\t\t\t\t);\n\t\t\t};\n\t\t\t\n\t\t\treturn res;\n\t\t};\n\t\t\n\t\tdesc.value = wrapper;\n\t\tdesc.value.rpc = true;\n\t};\n\t\n\treturn desc;\n};\n\nexport class OPStruct extends Array {\n\t\n\tstatic get [Symbol.species](){\n\t\t\n\t\treturn Array;\n\t}\n\t\n\tstatic serialize(item){\n\t\t\n\t\treturn item.slice(0);\n\t}\n\t\n\tstatic deserialize(params){\n\t\t\n\t\treturn this.of(...params);\n\t}\n\t\n\tstatic packed(...params){\n\t\t\n\t\treturn OP.pack(this.of(...params));\n\t}\n\t\n\tstatic inherited(subclass){\n\t\tlet nr;\n\t\t\n\t\t\n\t\tif (nr = msgpack.CustomMapping[subclass.name]) {\n\t\t\t\n\t\t\treturn msgpack.register(nr,subclass);\n\t\t};\n\t}\n\tstatic {\n\t\tdefineName$__(this,'OPStruct');inheritClass$__(this);}\n}; globalThis.OPStruct = OPStruct;\n\nclass SiteManifest extends OPStruct {\n\t\n\tget manifest(){\n\t\treturn this[0];\n\t}\n\tstatic {\n\t\tdefineName$__(this,'SiteManifest');inheritClass$__(this);}\n}; globalThis.SiteManifest = SiteManifest;\n\n// Use Struct for these instead?\nclass OPHandshake extends OPStruct {\n\t\n\tget session(){\n\t\treturn this[0];\n\t}\n\tstatic {\n\t\tdefineName$__(this,'OPHandshake');inheritClass$__(this);}\n}; globalThis.OPHandshake = OPHandshake;\n\nclass OPAssetUploaded extends OPStruct {\n\t\n\tget first(){\n\t\treturn this[0];\n\t}\n\tstatic {\n\t\tdefineName$__(this,'OPAssetUploaded');inheritClass$__(this);}\n}; globalThis.OPAssetUploaded = OPAssetUploaded;\n\nexport class Message {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $3;\n\t\t($3 = $$.ref) !== undefined && (this.ref = $3);\n\t\t\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tvar $4;\n\t\tthis.ref = ($$ && ($4 = $$.ref) !== undefined) ? ($4) : (msgcounter++);\n\t\t\n\t}\n\tget responseΦ(){\n\t\t\n\t\treturn this.ref < 0;\n\t}\n\t\n\t$resolve(value){\n\t\t\n\t\treturn true;\n\t}\n\t\n\tstatic serialize(item){\n\t\t\n\t\tlet ref = item.ref;\n\t\t// p 'serialize message',ref,item.value\n\t\tif (ref < 0) {\n\t\t\t\n\t\t\treturn [ref,item.value];\n\t\t};\n\t\t\n\t\treturn [ref,item.target,item.action,item.params];\n\t}\n\t\n\tstatic deserialize(item){\n\t\t\n\t\tif (item.length == 2) { // response\n\t\t\t\n\t\t\tlet [ref,value] = item;\n\t\t\treturn new Reply({ref: ref,value: value});\n\t\t};\n\t\t\n\t\treturn new RemoteCall(\n\t\t\t{ref: item[0],\n\t\t\ttarget: item[1],\n\t\t\taction: item[2],\n\t\t\tparams: item[3]}\n\t\t);\n\t}\n\t\n\tconstructor(params){\n\t\t\n\t\tObject.defineProperty(this,'src',{enumerable: false,writable: true});\n\t\tthis[$__init__$](params);\n\t\t// make thenable\n\t}\n\tstatic {\n\t\tdefineName$__(this,'Message');}\n};\n\nexport class RemoteCall extends Message {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $5;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\t($5 = $$.target) !== undefined && (this.target = $5);\n\t\t($5 = $$.action) !== undefined && (this.action = $5);\n\t\t($5 = $$.params) !== undefined && (this.params = $5);\n\t\t\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tvar $6;\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tthis.target = ($$ && ($6 = $$.target) !== undefined) ? ($6) : null;\n\t\tthis.action = ($$ && ($6 = $$.action) !== undefined) ? ($6) : null;\n\t\tthis.params = ($$ && ($6 = $$.params) !== undefined) ? ($6) : null;\n\t\t\n\t}\n\tstatic {\n\t\tdefineName$__(this,'RemoteCall');inheritClass$__(this);}\n};\n\nMessage.Call = RemoteCall;\n\nexport class Reply extends Message {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $7;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\t($7 = $$.value) !== undefined && (this.value = $7);\n\t\t\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tvar $8;\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tthis.value = ($$ && ($8 = $$.value) !== undefined) ? ($8) : undefined;\n\t\t\n\t}\n\tstatic {\n\t\tdefineName$__(this,'Reply');inheritClass$__(this);}\n};\n\nMessage.Reply = Reply;\n\nexport class MessageRequest extends Message {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $9;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\t($9 = $$.target) !== undefined && (this.target = $9);\n\t\t($9 = $$.action) !== undefined && (this.action = $9);\n\t\t($9 = $$.params) !== undefined && (this.params = $9);\n\t\t\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tvar $10;\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tthis.target = ($$ && ($10 = $$.target) !== undefined) ? ($10) : null;\n\t\tthis.action = ($$ && ($10 = $$.action) !== undefined) ? ($10) : null;\n\t\tthis.params = ($$ && ($10 = $$.params) !== undefined) ? ($10) : null;\n\t\t\n\t}\n\tthen(ok,err){\n\t\tvar self = this;\n\t\t\n\t\tthis.$promise ||= new Promise(function(resolve,reject) {\n\t\t\t\n\t\t\tself.$resolved = resolve;\n\t\t\treturn self.$rejected = reject;\n\t\t});\n\t\t\n\t\treturn this.$promise.then(ok,err);\n\t}\n\t\n\t$resolve(val){\n\t\t\n\t\tthis.result = val;\n\t\tif (this.$resolved) { this.$resolved(val) };\n\t\treturn this.$promise = Promise.resolve(this.result);\n\t}\n\t\n\t$reject(err){\n\t\t\n\t\tthis.result = err;\n\t\tif (this.$rejected) { this.$rejected(err) };\n\t\treturn this.$promise = Promise.reject(this.result);\n\t}\n\tstatic {\n\t\tdefineName$__(this,'MessageRequest');inheritClass$__(this);}\n};\n\nmsgpack.register(0,Message);\n\n// PERMISSIONS\nexport const D = 1 << 4;// Delete: 16\nexport const C = 1 << 3;// Create: 8\nexport const R = 1 << 2;// Read: 4\nexport const W = 1 << 1;// Write: 2\nexport const X = 1 << 0;// Execute: 1\n\nexport const RW = R | W;\nexport const RWD = R | W | D;\nexport const RWX = R | W | X;\n\n/*\nThe format for a packet is\n[source,dest,reference,code,...params]\n*/\n\n\n/*\nFlags used on models to track their state\n*/\n\nexport const FLAGS = {\n\tCLOUD: 1 << 1,\n\tFULL: 1 << 2,\n\tEMBED: 1 << 3,\n\tDELETED: 1 << 4,\n\tREGISTERED: 1 << 5,\n\tUNSAVED: 1 << 6,\n\tDRAFT: 1 << 7,\n\tWEB: 1 << 8,\n\tORPHAN: 1 << 9,\n\t\n\tREFCOUNTED: 1 << 10,\n\tDEREFERENCED: 1 << 11,\n\tDIFF: 1 << 12,\n\tPERSISTED: 1 << 13,\n\tLOCAL: 1 << 14,\n\tPACK_DATA: 1 << 15,\n\tPACK_POV: 1 << 16,\n\tPACK_CHILDREN: 1 << 17,\n\tPACK_REFS: 1 << 18\n};\n\nglobalThis.OPFLAGS = FLAGS;\n\n/*\nUse msgpack custom extensions for errors\n*/\n\nexport class OPError extends Error {\n\t\n\t\n\tstatic raise(msg){\n\t\t\n\t\tthrow new this(msg);\n\t}\n\t\n\tconstructor(){\n\t\t\n\t\tsuper();\n\t\tthis.constructor.count += 1;\n\t\tthis.name = (\"\" + (this.constructor.name) + \" #\" + (this.constructor.count));\n\t\tthis[$__initor__$]===$1 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $1;defineName$__(this,'OPError');this.count = 0;\n\t\tinheritClass$__(this);}\n}; globalThis.OPError = OPError;\n\nexport class OPForeignKeyError extends OPError {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $11;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\t($11 = $$.message) !== undefined && (this.message = $11);\n\t\t\n\t}\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();this[$__initor__$]===$2 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tvar $12;\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tthis.message = ($$ && ($12 = $$.message) !== undefined) ? ($12) : \"Fields with the foreign modifier can only be set to objects that are persisted\";\n\t\t\n\t}\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $2;defineName$__(this,'OPForeignKeyError');inheritClass$__(this);}\n}; globalThis.OPForeignKeyError = OPForeignKeyError;\n\nexport class ValidationError extends OPError {\nstatic {\n\tdefineName$__(this,'ValidationError');inheritClass$__(this);}};\n\nexport class PermissionDeniedError extends OPError {\nstatic {\n\tdefineName$__(this,'PermissionDeniedError');inheritClass$__(this);}};\n\nclass OPPermissionDeniedError extends OPError {\nstatic {\n\tdefineName$__(this,'OPPermissionDeniedError');inheritClass$__(this);}}; globalThis.OPPermissionDeniedError = OPPermissionDeniedError;\n\nclass OPNotAllowed extends OPError {\nstatic {\n\tdefineName$__(this,'OPNotAllowed');inheritClass$__(this);}}; globalThis.OPNotAllowed = OPNotAllowed;\n\nexport class OPTimeoutError extends OPError {\nstatic {\n\tdefineName$__(this,'OPTimeoutError');inheritClass$__(this);}}; globalThis.OPTimeoutError = OPTimeoutError;\n\nmsgpack.register(39,Error,{\n\twrite: function(item) {\n\t\t\n\t\treturn [item.constructor.name,item.message,{cause: item.cause}];\n\t},\n\t\n\tread: function([name,msg,opts]) {\n\t\t\n\t\tlet typ = globalThis[name] || Error;\n\t\tlet err = new typ(msg);\n\t\tconsole.log('deserializing error',err,[typ,name,msg,opts]);\n\t\terr.stack = msg;\n\t\treturn err;\n\t}\n});\n","dependencies":[],"map":{"version":3,"file":"protocol.js","sourceRoot":"","sources":["/Users/sindre/repos/scrimba/op/src/protocol.imba"],"sourcesContent":["\nimport * as msgpack from './msgpack'\n\nconst p = console.log.bind(console)\n\nlet msgcounter = 100\n\nexport * from './msgpack'\n\nexport def @rpc target, key, desc\n\n\tif let fn = desc.value\n\t\tlet wrapper = do(...params)\n\n\t\t\tlet ctx = params[0]\n\t\t\tlet res\n\t\t\t# this is the local source\n\t\t\tif ctx == this or ctx == OP or ctx == null or ctx isa Message\n\t\t\t\tres = fn.call(this,...params)\n\t\t\telse\n\n\t\t\t\tres = new Message(\n\t\t\t\t\t_cre: OP..now\n\t\t\t\t\tsrc: global.OP\n\t\t\t\t\tdst: ctx\n\t\t\t\t\ttarget: this\n\t\t\t\t\taction: key\n\t\t\t\t\tparams: params.slice(1)\n\t\t\t\t)\n\n\t\t\treturn res\n\n\t\tdesc.value = wrapper\n\t\tdesc.value.rpc = yes\n\n\treturn desc\n\nexport global class OPStruct < Array\n\tstatic get [Symbol.species]\n\t\tArray\n\n\tstatic def serialize item\n\t\titem.slice(0)\n\n\tstatic def deserialize params\n\t\tself.of(...params)\n\n\tstatic def packed ...params\n\t\tOP.pack(self.of(...params))\n\n\tstatic def inherited subclass\n\n\t\tif let nr = msgpack.CustomMapping[subclass.name]\n\t\t\tmsgpack.register(nr,subclass)\n\nglobal class SiteManifest < OPStruct\n\tget manifest do self[0]\n\n# Use Struct for these instead?\nglobal class OPHandshake < OPStruct\n\tget session do self[0]\n\nglobal class OPAssetUploaded < OPStruct\n\tget first do self[0]\n\nexport class Message\n\n\tref = msgcounter++\n\n\tget response?\n\t\tref < 0\n\n\tdef $resolve value\n\t\tyes\n\n\tstatic def serialize item\n\t\tlet ref = item.ref\n\t\t# p 'serialize message',ref,item.value\n\t\tif ref < 0\n\t\t\treturn [ref,item.value]\n\n\t\treturn [ref,item.target,item.action,item.params]\n\n\tstatic def deserialize item\n\t\tif item.length == 2 # response\n\t\t\tlet [ref,value] = item\n\t\t\treturn new Reply({ref,value})\n\n\t\tnew RemoteCall(\n\t\t\tref: item[0]\n\t\t\ttarget: item[1]\n\t\t\taction: item[2]\n\t\t\tparams: item[3]\n\t\t)\n\n\tdef constructor params\n\t\tObject.defineProperty(self,'src',enumerable: no, writable: yes)\n\t\tsuper(params)\n\t\t# make thenable\n\nexport class RemoteCall < Message\n\ttarget = null\n\taction = null\n\tparams = null\n\nMessage.Call = RemoteCall\n\nexport class Reply < Message\n\tvalue = undefined\n\nMessage.Reply = Reply\n\nexport class MessageRequest < Message\n\ttarget = null\n\taction = null\n\tparams = null\n\n\tdef then ok,err\n\t\t$promise ||= new Promise do(resolve,reject)\n\t\t\t$resolved = resolve\n\t\t\t$rejected = reject\n\n\t\t$promise.then(ok,err)\n\n\tdef $resolve val\n\t\tresult = val\n\t\t$resolved(val) if $resolved\n\t\t$promise = Promise.resolve(result)\n\n\tdef $reject err\n\t\tresult = err\n\t\t$rejected(err) if $rejected\n\t\t$promise = Promise.reject(result)\n\nmsgpack.register(0,Message)\n\n# PERMISSIONS\nexport const D = 1 << 4 # Delete: 16\nexport const C = 1 << 3 # Create: 8\nexport const R = 1 << 2 # Read: 4\nexport const W = 1 << 1 # Write: 2\nexport const X = 1 << 0 # Execute: 1\n\nexport const RW = R | W\nexport const RWD = R | W | D\nexport const RWX = R | W | X\n\n###\nThe format for a packet is\n[source,dest,reference,code,...params]\n###\n\n###\nFlags used on models to track their state\n###\nexport const FLAGS = {\n\tCLOUD:\t\t\t1 << 1\n\tFULL:       1 << 2\n\tEMBED:      1 << 3\n\tDELETED: \t\t1 << 4\n\tREGISTERED: 1 << 5\n\tUNSAVED: \t\t1 << 6\n\tDRAFT: \t\t\t1 << 7\n\tWEB: \t\t\t\t1 << 8\n\tORPHAN: \t\t1 << 9\n\n\tREFCOUNTED: 1 << 10\n\tDEREFERENCED: 1 << 11\n\tDIFF: 1 << 12\n\tPERSISTED: 1 << 13\n\tLOCAL: 1 << 14\n\tPACK_DATA: 1 << 15\n\tPACK_POV: 1 << 16\n\tPACK_CHILDREN: 1 << 17\n\tPACK_REFS: 1 << 18\n}\n\nglobal.OPFLAGS = FLAGS\n\n###\nUse msgpack custom extensions for errors\n###\nexport global class OPError < Error\n\n\tstatic def raise msg\n\t\tthrow new self(msg)\n\n\tstatic count = 0\n\n\tdef constructor\n\t\tsuper()\n\t\tconstructor.count += 1\n\t\tname = \"{constructor.name} #{constructor.count}\"\n\n\tdeclare request\n\tdeclare response\n\nexport global class OPForeignKeyError < OPError\n\tmessage = \"Fields with the foreign modifier can only be set to objects that are persisted\"\n\nexport class ValidationError < OPError\n\nexport class PermissionDeniedError < OPError\n\nglobal class OPPermissionDeniedError < OPError\n\nglobal class OPNotAllowed < OPError\n\nexport global class OPTimeoutError < OPError\n\nmsgpack.register(39,Error,{\n\twrite: do(item)\n\t\t[item.constructor.name,item.message,{cause: item.cause}]\n\n\tread: do([name,msg,opts])\n\t\tlet typ = global[name] or Error\n\t\tlet err = new typ(msg)\n\t\tconsole.log 'deserializing error',err,[typ,name,msg,opts]\n\t\terr.stack = msg\n\t\treturn err\n})\n"],"names":[],"mappings":"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"}},"css":{"code":""},"warnings":[],"errors":[]}
{"js":{"code":"function defineName$__(cls,name){\n\tObject.defineProperty(cls,\"name\",{value:name,configurable:true});\n};;\nfunction inheritClass$__(cls){\n\tObject.getPrototypeOf(cls.prototype).constructor?.inherited?.(cls);\n};\nimport {accessor as imba_accessor} from 'imba';\nvar $1 = Symbol('name'), $2 = Symbol(), $3 = Symbol('liked'), $4 = Symbol(), $5 = Symbol('likes'), $6 = Symbol(), $7 = Symbol(), $9, $10, $11;\nconst $__init__$ = Symbol.for('#__init__'), $__patch__$ = Symbol.for('#__patch__'), $__initor__$ = Symbol.for('#__initor__'), $__inited__$ = Symbol.for('#__inited__'), $__hooks__$ = Symbol.for('#__hooks__');\n\n/*body*/\nimport setup from './setup';\n\nclass Item extends OP.Object {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $8;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($8 = $$.name) !== undefined && this.ααname.$init($8,this,$1,'name',$$);\n\t\tfields && ($8 = $$.liked) !== undefined && this.ααliked.$init($8,this,$3,'liked',$$);\n\t\tfields && ($8 = $$.likes) !== undefined && this.ααlikes.$init($8,this,$5,'likes',$$);\n\t\t\n\t}\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();this[$__initor__$]===$7 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααname.$init($$ ? $$.name : undefined,this,$1,'name',$$);\n\t\tfields && this.ααliked.$init($$ ? $$.liked : undefined,this,$3,'liked',$$);\n\t\tfields && this.ααlikes.$init($$ ? $$.likes : undefined,this,$5,'likes',$$);\n\t\t\n\t}\n\tset name(val){ this.ααname.$set(val,this,$1,'name') }\n\tget name(){ return this.ααname.$get(this,$1,'name') }\n\tget ααname(){ return this[$2] || imba_accessor(($9 = this.αstring(),$9),this,$1,'name',$2,Item.prototype) }\n\tset liked(val){ this.ααliked.$set(val,this,$3,'liked') }\n\tget liked(){ return this.ααliked.$get(this,$3,'liked') }\n\tget ααliked(){ return this[$4] || imba_accessor(($10 = this.αtoggle(),($10.pov instanceof Function) ? $10.pov() : ($10.pov = true),$10),this,$3,'liked',$4,Item.prototype) }\n\tset likes(val){ this.ααlikes.$set(val,this,$5,'likes') }\n\tget likes(){ return this.ααlikes.$get(this,$5,'likes') }\n\tget ααlikes(){ return this[$6] || imba_accessor(($11 = this.αagg(this.ααliked),$11),this,$5,'likes',$6,Item.prototype) }\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $7;defineName$__(this,'Item');inheritClass$__(this);}\n};\n\nawait setup(__filename);\n\nconst item = await Item.create({name: \"Hey\"});\nconst user = await OPUser.create({name: \"Sindre\"});\n\ntest(\"set\",async function() {\n\t\n\tlet item = await Item.create();\n\treturn OP.withΞcontext(user,async function() {\n\t\t\n\t\titem.liked = true;\n\t\tlet pov = item.$pov(user);\n\t\tok(pov.unsavedΦ);\n\t\t// await pov.$muts.persist!\n\t\tawait pov.save();\n\t\treturn ok(item.savedΦ);\n\t});\n});\n\n","dependencies":[],"map":{"version":3,"file":"toggle.test.js","sourceRoot":"","sources":["/Users/sindre/repos/scrimba/op/test/toggle.test.imba"],"sourcesContent":["import setup from './setup'\n\nclass Item < OP.Object\n\tname @string\n\tliked @toggle.pov\n\tlikes @agg(@@liked)\n\nawait setup(__filename)\n\nconst item = await Item.create(name: \"Hey\")\nconst user = await OPUser.create(name: \"Sindre\")\n\ntest \"set\" do\n\tlet item = await Item.create!\n\tOP.with-context(user) do\n\t\titem.liked = yes\n\t\tlet pov = item.$pov(user)\n\t\tok pov.unsaved?\n\t\t# await pov.$muts.persist!\n\t\tawait pov.save!\n\t\tok item.saved?\n\n"],"names":[],"mappings":";;;;;;;;;;;AAAA,MAAM,CAAC,KAAK,MAAM,SAAS;;AAE3B,KAAK,CAAC,IAAI,SAAG,EAAE,CAAC,MAAM,EAAA;qCAFtB;;;qBAGC,IAAI,CAAA;qBACJ,KAAK,CAAA;qBACL,KAAK,CAAA;;EALN;cAAA;;;EAAA;kDAAA;;sCAGC,IAAI;uCACJ,KAAK;uCACL,KAAK;;EALN;KAGC,IAAI;KAAJ,IAAI;KAAJ,MAAI,gDAAC,OAAO,EAAA,uBADP,IAAI;KAET,KAAK;KAAL,KAAK;KAAL,OAAK,iDAAC,OAAO,EAAA,MAAC,GAAG,4BAAH,GAAG,EAAA,QAAH,GAAG,iCAFZ,IAAI;KAGT,KAAK;KAAL,KAAK;KAAL,OAAK,iDAAC,IAAI,CAAC,KAAA,OAAO,CAAC,yBAHd,IAAI;;;AAGU,CAAA;;MAEd,KAAK,CAAC,UAAU,CAAC;;MAEjB,IAAI,SAAS,IAAI,CAAC,MAAM,EAAC,IAAI,EAAE,KAAK,EAAC;MACrC,IAAI,SAAS,MAAM,CAAC,MAAM,EAAC,IAAI,EAAE,QAAQ,EAAC;;AAEhD,IAAI,CAAC,KAAK,CAAC,cAAE,GAAA;;KACR,IAAI,SAAS,IAAI,CAAC,MAAM,EAAC;CAC7B,OAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAE,cAAE,GAAA;;EACvB,IAAI,CAAC,KAAK,GAAG,IAAG;MACZ,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;EACzB,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAA;;QAET,GAAG,CAAC,IAAI,EAAC;EACf,OAAA,EAAE,CAAC,IAAI,CAAC,MAAM,CAAA;EAAA,CANM;CAMN,CARZ;;AAUJ;"}},"css":{"code":""},"warnings":[],"errors":[]}
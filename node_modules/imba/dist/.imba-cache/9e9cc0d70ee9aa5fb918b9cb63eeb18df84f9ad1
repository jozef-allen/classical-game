{"js":{"code":"const $num$ = Symbol.for('#num');\n\n/*body*/\nimport '../../src/core/diff';\nimport differ from '../../src/util/differnew';\n\n\nfunction check(a,b,eq){\n\t\n\tlet diff = differ(a,b);\n\tconsole.log(\"%s %s %O\",'\u001b[90m::\u001b[0m','\u001b[44m\u001b[97meq\u001b[0m',eq);\n\treturn ok(diff,eq);\n};\n\nlet DIFF = function() { return OPDIFF.of(...arguments); };\nlet SET = function() { return OPSET.of(...arguments); };\nlet DEL = function() { return OPDEL.of(...arguments); };\nlet MOD = function() { return OPMOD.of(...arguments); };\n\ntest(\"basics\",function() {\n\t\n\t\n\tcheck(\n\t\t{num: 1,items: {a: 1,b: 2}},\n\t\t{num: 2,items: {a: 1,b: 2}},\n\t\tSET(\"num\",2,1)\n\t);\n\t\n\tcheck(\n\t\t{num: 1,items: {a: 1,b: 2}},\n\t\t{num: 1,items: {a: 2,b: 2}},\n\t\tMOD(\"items\",SET(\"a\",2,1))\n\t);\n\t\n\tcheck(\n\t\t{num: 1,items: {a: 1,b: 2}},\n\t\t{num: 1,items: {a: 2,b: 3}},\n\t\tMOD(\"items\",DIFF(SET(\"a\",2,1),SET(\"b\",3,2)))\n\t);\n\t\n\tcheck(\n\t\t{a: 1,b: 2},\n\t\t{b: 2},\n\t\tDEL(\"a\",1)\n\t);\n\treturn check(\n\t\t{a: 1,b: 2},\n\t\t{a: 2,b: {x: 1}},\n\t\tDIFF(SET('a',2,1),SET(\"b\",{x: 1},2))\n\t);\n\t\n\t// {a: {b}}\n\t\n\t\n});\n\ntest(\"local changes\",function() {\n\tlet a;\n\t\n\treturn a = {\n\t\tnum: 1,\n\t\tset: {a: {num: 1},b: {num: 1,[$num$]: 3}}\n\t};\n});\n","dependencies":[],"map":{"version":3,"file":"diff.test.js","sourceRoot":"","sources":["/Users/sindre/repos/scrimba/op/test/core/diff.test.imba"],"sourcesContent":["import '../../src/core/diff'\nimport differ from '../../src/util/differnew'\n\n\ndef check a,b,eq\n\tlet diff = differ(a,b)\n\tL eq\n\tok diff,eq\n\nlet DIFF = do OPDIFF.of(...$0)\nlet SET = do OPSET.of(...$0)\nlet DEL = do OPDEL.of(...$0)\nlet MOD = do OPMOD.of(...$0)\n\ntest \"basics\" do\n\n\tcheck(\n\t\t{num:1, items: {a: 1, b: 2} }\n\t\t{num:2, items: {a: 1, b: 2} }\n\t\tSET(\"num\",2,1)\n\t)\n\n\tcheck(\n\t\t{num:1, items: {a: 1, b: 2} }\n\t\t{num:1, items: {a: 2, b: 2} }\n\t\tMOD(\"items\", SET(\"a\",2,1) )\n\t)\n\n\tcheck(\n\t\t{num:1, items: {a: 1, b: 2} }\n\t\t{num:1, items: {a: 2, b: 3} }\n\t\tMOD(\"items\", DIFF(SET(\"a\",2,1),SET(\"b\",3,2)))\n\t)\n\n\tcheck(\n\t\t{a:1, b:2}\n\t\t{b:2}\n\t\tDEL(\"a\",1)\n\n\t)\n\tcheck(\n\t\t{a:1,b:2}\n\t\t{a:2,b:{x:1}}\n\t\tDIFF(SET('a',2,1),SET(\"b\",{x:1},2))\n\t)\n\n\t# {a: {b}}\n\n\t\n\ntest \"local changes\" do\n\tlet a = {\n\t\tnum: 1\n\t\tset: {a: {num: 1},b: {num: 1, #num:3}}\n\t}"],"names":[],"mappings":";;;AAAA,MAAM,CAAC,qBAAqB;AAC5B,MAAM,CAAC,MAAM,MAAM,0BAA0B;;;AAG7C,QAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAA;;KACX,IAAI,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;CACtB,WAAE,6CAAA,EAAE,CAAA;CACJ,OAAA,EAAE,CAAC,IAAI,CAAC,EAAE,CAAA;CAAA;;IAEP,IAAI,GAAG,QAAE,KAAC,OAAA,MAAM,CAAC,EAAE,IAAI,SAAE,CAAC;IAC1B,GAAG,GAAG,QAAE,KAAC,OAAA,KAAK,CAAC,EAAE,IAAI,SAAE,CAAC;IACxB,GAAG,GAAG,QAAE,KAAC,OAAA,KAAK,CAAC,EAAE,IAAI,SAAE,CAAC;IACxB,GAAG,GAAG,QAAE,KAAC,OAAA,KAAK,CAAC,EAAE,IAAI,SAAE,CAAC;;AAE5B,IAAI,CAAC,QAAQ,CAAC,QAAE,GAAA;;;CAEf,KAAK;EACJ,CAAC,GAAG,EAAC,CAAC,CAAE,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAE,CAAC,EAAE,CAAC,CAAC,CAAE;EAC7B,CAAC,GAAG,EAAC,CAAC,CAAE,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAE,CAAC,EAAE,CAAC,CAAC,CAAE;EAC7B,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;EACd;;CAED,KAAK;EACJ,CAAC,GAAG,EAAC,CAAC,CAAE,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAE,CAAC,EAAE,CAAC,CAAC,CAAE;EAC7B,CAAC,GAAG,EAAC,CAAC,CAAE,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAE,CAAC,EAAE,CAAC,CAAC,CAAE;EAC7B,GAAG,CAAC,OAAO,CAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE;EAC3B;;CAED,KAAK;EACJ,CAAC,GAAG,EAAC,CAAC,CAAE,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAE,CAAC,EAAE,CAAC,CAAC,CAAE;EAC7B,CAAC,GAAG,EAAC,CAAC,CAAE,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAE,CAAC,EAAE,CAAC,CAAC,CAAE;EAC7B,GAAG,CAAC,OAAO,CAAE,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAC7C;;CAED,KAAK;EACJ,CAAC,CAAC,EAAC,CAAC,CAAE,CAAC,EAAC,CAAC,CAAC;EACV,CAAC,CAAC,EAAC,CAAC,CAAC;EACL,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;EAEV;CACD,OAAA,KAAK;EACJ,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,EAAC,CAAC,CAAC;EACT,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;EACb,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACnC;;;;;CAES,CAhCP;;AAoCJ,IAAI,CAAC,eAAe,CAAC,QAAE,GAAA;;;QAClB,CAAC,GAAG;EACP,GAAG,EAAE,CAAC;EACN,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,UAAO,CAAC,CAAC,CAAC;EACtC;CAAA,CAJE;AAIF;"}},"css":{"code":""},"warnings":[],"errors":[]}
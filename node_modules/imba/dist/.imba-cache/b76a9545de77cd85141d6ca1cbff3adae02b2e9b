{"js":{"code":"function defineName$__(cls,name){\n\tObject.defineProperty(cls,\"name\",{value:name,configurable:true});\n};;\nfunction inheritClass$__(cls){\n\tObject.getPrototypeOf(cls.prototype).constructor?.inherited?.(cls);\n};\nimport {accessor as imba_accessor} from 'imba';\nvar $1 = Symbol('ping'), $2 = Symbol(), $3 = Symbol(), $4 = Symbol('id'), $5 = Symbol(), $6 = Symbol('creator'), $7 = Symbol(), $8 = Symbol('name'), $9 = Symbol(), $10 = Symbol('note'), $11 = Symbol(), $12 = Symbol('items'), $13 = Symbol(), $14 = Symbol('parents'), $15 = Symbol(), $16 = Symbol(), $17 = Symbol('todos'), $18 = Symbol(), $19 = Symbol('owners'), $20 = Symbol(), $21 = Symbol('name'), $22 = Symbol(), $23 = Symbol('seen'), $24 = Symbol(), $25 = Symbol('labels'), $26 = Symbol(), $27 = Symbol('watchers'), $28 = Symbol(), $29 = Symbol('progress'), $30 = Symbol(), $31 = Symbol('filePersisted'), $32 = Symbol(), $33 = Symbol(), $35, $37, $38, $39, $40, $41, $42, $44, $46, $47, $48, $49, $50, $52, $53;\nconst $__init__$ = Symbol.for('#__init__'), $__patch__$ = Symbol.for('#__patch__'), $__initor__$ = Symbol.for('#__initor__'), $__inited__$ = Symbol.for('#__inited__'), $__hooks__$ = Symbol.for('#__hooks__');\n\n/*body*/\nimport 'op';\n\nclass Server extends OP.Server {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $34;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($34 = $$.ping) !== undefined && this.ααping.$init($34,this,$1,'ping',$$);\n\t\t\n\t}\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();this[$__initor__$]===$3 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααping.$init($$ ? $$.ping : undefined,this,$1,'ping',$$);\n\t\t\n\t}\n\tset ping(val){ this.ααping.$set(val,this,$1,'ping') }\n\tget ping(){ return this.ααping.$get(this,$1,'ping') }\n\tget ααping(){ return this[$2] || imba_accessor(($35 = this.αaction(),($35.rpc instanceof Function) ? $35.rpc() : ($35.rpc = true),($35.callback instanceof Function) ? $35.callback(function(v) {\n\t\t\n\t\tconsole.log('ping!',v,OP.agent?.id);\n\t\tMath.rondom();\n\t\treturn 10;\n\t}) : ($35.callback = function(v) {\n\t\t\n\t\tconsole.log('ping!',v,OP.agent?.id);\n\t\tMath.rondom();\n\t\treturn 10;\n\t}),$35),this,$1,'ping',$2,Server.prototype) }\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $3;defineName$__(this,'Server');inheritClass$__(this);}\n};\n\nexport class Item extends OP.Object {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $36;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($36 = $$.id) !== undefined && this.ααid.$init($36,this,$4,'id',$$);\n\t\tfields && ($36 = $$.creator) !== undefined && this.ααcreator.$init($36,this,$6,'creator',$$);\n\t\tfields && ($36 = $$.name) !== undefined && this.ααname.$init($36,this,$8,'name',$$);\n\t\tfields && ($36 = $$.note) !== undefined && this.ααnote.$init($36,this,$10,'note',$$);\n\t\tfields && ($36 = $$.items) !== undefined && this.ααitems.$init($36,this,$12,'items',$$);\n\t\tfields && ($36 = $$.parents) !== undefined && this.ααparents.$init($36,this,$14,'parents',$$);\n\t\t\n\t}\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();this[$__initor__$]===$16 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααid.$init($$ ? $$.id : undefined,this,$4,'id',$$);\n\t\tfields && this.ααcreator.$init($$ ? $$.creator : undefined,this,$6,'creator',$$);\n\t\tfields && this.ααname.$init($$ ? $$.name : undefined,this,$8,'name',$$);\n\t\tfields && this.ααnote.$init($$ ? $$.note : undefined,this,$10,'note',$$);\n\t\tfields && this.ααitems.$init($$ ? $$.items : undefined,this,$12,'items',$$);\n\t\tfields && this.ααparents.$init($$ ? $$.parents : undefined,this,$14,'parents',$$);\n\t\t\n\t}\n\tset id(val){ this.ααid.$set(val,this,$4,'id') }\n\tget id(){ return this.ααid.$get(this,$4,'id') }\n\tget ααid(){ return this[$5] || imba_accessor(($37 = this.αkey(),$37),this,$4,'id',$5,Item.prototype) }\n\tset creator(val){ this.ααcreator.$set(val,this,$6,'creator') }\n\tget creator(){ return this.ααcreator.$get(this,$6,'creator') }\n\tget ααcreator(){ return this[$7] || imba_accessor(($38 = this.αref(OP.User),$38.default = function() {\n\t\treturn OP.user;\n\t},$38),this,$6,'creator',$7,Item.prototype) }\n\tset name(val){ this.ααname.$set(val,this,$8,'name') }\n\tget name(){ return this.ααname.$get(this,$8,'name') }\n\tget ααname(){ return this[$9] || imba_accessor(($39 = this.αstring(),$39),this,$8,'name',$9,Item.prototype) }\n\tset note(val){ this.ααnote.$set(val,this,$10,'note') }\n\tget note(){ return this.ααnote.$get(this,$10,'note') }\n\tget ααnote(){ return this[$11] || imba_accessor(($40 = this.αstring(),($40.pov instanceof Function) ? $40.pov() : ($40.pov = true),$40),this,$10,'note',$11,Item.prototype) }\n\tset items(val){ this.ααitems.$set(val,this,$12,'items') }\n\tget items(){ return this.ααitems.$get(this,$12,'items') }\n\tget ααitems(){ return this[$13] || imba_accessor(($41 = this.αchildren(Item),$41),this,$12,'items',$13,Item.prototype) }\n\tset parents(val){ this.ααparents.$set(val,this,$14,'parents') }\n\tget parents(){ return this.ααparents.$get(this,$14,'parents') }\n\tget ααparents(){ return this[$15] || imba_accessor(($42 = this.αparents(List),$42),this,$14,'parents',$15,Item.prototype) }\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $16;defineName$__(this,'Item');inheritClass$__(this);}\n};\n\nexport class List extends Item {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $43;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($43 = $$.todos) !== undefined && this.ααtodos.$init($43,this,$17,'todos',$$);\n\t\t\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααtodos.$init($$ ? $$.todos : undefined,this,$17,'todos',$$);\n\t\t\n\t}\n\tset todos(val){ this.ααtodos.$set(val,this,$17,'todos') }\n\tget todos(){ return this.ααtodos.$get(this,$17,'todos') }\n\tget ααtodos(){ return this[$18] || imba_accessor(($44 = this.αchildren(Todo),$44),this,$17,'todos',$18,List.prototype) }\n\tstatic {\n\t\tdefineName$__(this,'List');this.alias = 'l';\n\t\tinheritClass$__(this);}\n};\n\nexport class Todo extends Item {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $45;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($45 = $$.owners) !== undefined && this.ααowners.$init($45,this,$19,'owners',$$);\n\t\tfields && ($45 = $$.name) !== undefined && this.ααname.$init($45,this,$21,'name',$$);\n\t\tfields && ($45 = $$.seen) !== undefined && this.ααseen.$init($45,this,$23,'seen',$$);\n\t\tfields && ($45 = $$.labels) !== undefined && this.ααlabels.$init($45,this,$25,'labels',$$);\n\t\tfields && ($45 = $$.watchers) !== undefined && this.ααwatchers.$init($45,this,$27,'watchers',$$);\n\t\t\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααowners.$init($$ ? $$.owners : undefined,this,$19,'owners',$$);\n\t\tfields && this.ααname.$init($$ ? $$.name : undefined,this,$21,'name',$$);\n\t\tfields && this.ααseen.$init($$ ? $$.seen : undefined,this,$23,'seen',$$);\n\t\tfields && this.ααlabels.$init($$ ? $$.labels : undefined,this,$25,'labels',$$);\n\t\tfields && this.ααwatchers.$init($$ ? $$.watchers : undefined,this,$27,'watchers',$$);\n\t\t\n\t}\n\tset owners(val){ this.ααowners.$set(val,this,$19,'owners') }\n\tget owners(){ return this.ααowners.$get(this,$19,'owners') }\n\tget ααowners(){ return this[$20] || imba_accessor(($46 = this.αitems(OP.User),$46),this,$19,'owners',$20,Todo.prototype) }\n\tset name(val){ this.ααname.$set(val,this,$21,'name') }\n\tget name(){ return this.ααname.$get(this,$21,'name') }\n\tget ααname(){ return this[$22] || imba_accessor(($47 = this.αstring(),$47),this,$21,'name',$22,Todo.prototype) }\n\tset seen(val){ this.ααseen.$set(val,this,$23,'seen') }\n\tget seen(){ return this.ααseen.$get(this,$23,'seen') }\n\tget ααseen(){ return this[$24] || imba_accessor(($48 = this.αtoggle(),($48.pov instanceof Function) ? $48.pov() : ($48.pov = true),$48),this,$23,'seen',$24,Todo.prototype) }\n\tset labels(val){ this.ααlabels.$set(val,this,$25,'labels') }\n\tget labels(){ return this.ααlabels.$get(this,$25,'labels') }\n\tget ααlabels(){ return this[$26] || imba_accessor(($49 = this.αzset(String),$49),this,$25,'labels',$26,Todo.prototype) }\n\tset watchers(val){ this.ααwatchers.$set(val,this,$27,'watchers') }\n\tget watchers(){ return this.ααwatchers.$get(this,$27,'watchers') }\n\tget ααwatchers(){ return this[$28] || imba_accessor(($50 = this.αzset(OP.Client),$50),this,$27,'watchers',$28,Todo.prototype) }\n\tstatic {\n\t\tdefineName$__(this,'Todo');this.alias = 't';\n\t\tinheritClass$__(this);}\n};\n\nexport class Attachement extends OPObject {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $51;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($51 = $$.progress) !== undefined && this.ααprogress.$init($51,this,$29,'progress',$$);\n\t\tfields && ($51 = $$.filePersisted) !== undefined && this.ααfilePersisted.$init($51,this,$31,'filePersisted',$$);\n\t\t\n\t}\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();this[$__initor__$]===$33 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααprogress.$init($$ ? $$.progress : undefined,this,$29,'progress',$$);\n\t\tfields && this.ααfilePersisted.$init($$ ? $$.filePersisted : undefined,this,$31,'filePersisted',$$);\n\t\t\n\t}\n\tset progress(val){ this.ααprogress.$set(val,this,$29,'progress') }\n\tget progress(){ return this.ααprogress.$get(this,$29,'progress') }\n\tget ααprogress(){ return this[$30] || imba_accessor(($52 = this.αint(),$52),this,$29,'progress',$30,Attachement.prototype) }\n\tset filePersisted(val){ this.ααfilePersisted.$set(val,this,$31,'filePersisted') }\n\tget filePersisted(){ return this.ααfilePersisted.$get(this,$31,'filePersisted') }\n\tget ααfilePersisted(){ return this[$32] || imba_accessor(($53 = this.αbool(),$53),this,$31,'filePersisted',$32,Attachement.prototype) }\n\tbeforePersist(){\n\t\t\n\t\treturn this.filePersisted = this.progress == 100;\n\t}\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $33;defineName$__(this,'Attachement');inheritClass$__(this);}\n};\n\nexport default [\n\t{id: 'l01',name: 'List'},\n\t{id: 't01',name: 'Todo1',parents: {l01: 1}},\n\t{id: 't02',name: 'Todo2',parents: {l01: 1}}\n];\n","dependencies":[],"map":{"version":3,"file":"schema.js","sourceRoot":"","sources":["/Users/sindre/repos/scrimba/op/test/todos/schema.imba"],"sourcesContent":["import 'op'\n\nclass Server < OP.Server\n\n\tping @action.rpc do(v)\n\t\tconsole.log 'ping!',v,OP.agent..id\n\t\tMath.rondom!\n\t\treturn 10\n\nexport class Item < OP.Object\n\tid @key\n\tcreator @ref(OP.User) = OP.user\n\tname @string\n\tnote @string.pov\n\titems @children(Item)\n\tparents @parents(List)\n\nexport class List < Item\n\tstatic alias = 'l'\n\ttodos @children(Todo)\n\nexport class Todo < Item\n\tstatic alias = 't'\n\towners @items(OP.User)\n\tname @string\n\tseen @toggle.pov\n\tlabels @zset(String)\n\twatchers @zset(OP.Client)\n\nexport class Attachement < OPObject\n\tprogress @int\n\tfilePersisted @bool\n\tdef beforePersist\n\t\tfilePersisted = progress == 100\n\nexport default [\n\t{id: 'l01', name: 'List'}\n\t{id: 't01', name: 'Todo1', parents: {l01: 1}}\n\t{id: 't02', name: 'Todo2', parents: {l01: 1}}\n]\n"],"names":[],"mappings":"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"}},"css":{"code":""},"warnings":[],"errors":[]}
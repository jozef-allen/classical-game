{"js":{"code":"function negIndex$__(value,index){ return value[value.length + index] };;\nfunction defineName$__(cls,name){\n\tObject.defineProperty(cls,\"name\",{value:name,configurable:true});\n};;\nfunction inheritClass$__(cls){\n\tObject.getPrototypeOf(cls.prototype).constructor?.inherited?.(cls);\n};\nconst $__initor__$ = Symbol.for('#__initor__'), $__inited__$ = Symbol.for('#__inited__'), $__hooks__$ = Symbol.for('#__hooks__');\nvar $1 = Symbol();\n\n/*body*/\nexport class Stack extends Array {\n\t\n\t\n\tconstructor(){\n\t\t\n\t\tsuper(...arguments);\n\t\tthis[$__initor__$]===$1 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t\n\tpush(item){\n\t\t\n\t\treturn super.push(this.current = item);\n\t}\n\t\n\tpop(item){\n\t\t\n\t\tif (this.current == item) {\n\t\t\t\n\t\t\tlet popped = super.pop(...arguments);\n\t\t\tthis.current = negIndex$__(this,-1);\n\t\t};\n\t\treturn this;\n\t}\n\t\n\tserialize(cb){\n\t\t\n\t\tlet prev = this.serializingΦ;\n\t\tthis.serializingΦ = true;\n\t\tlet res = cb();\n\t\tthis.serializingΦ = prev;\n\t\treturn res;\n\t}\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $1;defineName$__(this,'Stack');inheritClass$__(this);}\n};\n\nexport const STACK = new Stack;\n","dependencies":[],"map":{"version":3,"file":"stack.js","sourceRoot":"","sources":["/Users/sindre/repos/scrimba/op/src/stack.imba"],"sourcesContent":["export class Stack < Array\n\n\tdeclare batch\\OPMutations\n\n\tdef constructor\n\t\tsuper\n\n\tdef push item\n\t\tsuper(current = item)\n\n\tdef pop item\n\t\tif current == item\n\t\t\tlet popped = super\n\t\t\tcurrent = self[-1]\n\t\tself\n\n\tdef serialize cb\n\t\tlet prev = serializing?\n\t\tserializing? = yes\n\t\tlet res = cb()\n\t\tserializing? = prev\n\t\treturn res\n\nexport const STACK = new Stack"],"names":[],"mappings":";;;;;;;;;;;AAAA,MAAM,CAAC,KAAK,CAAC,KAAK,SAAG,KAAK,EAAA;;;CAIrB,WAAW,EAAA;;EACd,mBAAK;;EAAA;;CAEF,IAAI,CAAC,IAAI,CAAA;;EACZ,OAAA,MADG,IAAI,CACD,KAAA,OAAO,GAAG,IAAI,CAAC;EAAA;;CAElB,GAAG,CAAC,IAAI,CAAA;;EACX,EAAE,EAAC,KAAA,OAAO,CAAC,EAAE,CAAC,IAAI,EAAA;;OACb,MAAM,GAAG,MAFX,GAAG,cAEa;GAClB,KAAA,OAAO,GAAG,YAAA,IAAI,CAAC,EAAE,CAAC;GAAA;EACnB,OAAA,IAAI;EAAA;;CAED,SAAS,CAAC,EAAE,CAAA;;MACX,IAAI,GAAG,KAAA,YAAY;EACvB,KAAA,YAAY,GAAG,IAAG;MACd,GAAG,GAAG,EAAE,EAAE;EACd,KAAA,YAAY,GAAG,IAAI;EACnB,MAAM,CAAC,GAAG;EAAA;;;AAAA,CAAA;;AAEZ,MAAM,OAAO,KAAK,GAAG,GAAG,CAAC,KAAK;AAAA;"}},"css":{"code":""},"warnings":[],"errors":[]}
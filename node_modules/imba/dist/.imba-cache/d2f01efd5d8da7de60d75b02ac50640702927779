{"js":{"code":"function defineName$__(cls,name){\n\tObject.defineProperty(cls,\"name\",{value:name,configurable:true});\n};;\nfunction inheritClass$__(cls){\n\tObject.getPrototypeOf(cls.prototype).constructor?.inherited?.(cls);\n};;\nfunction extend$__(target,ext){\n\t// @ts-ignore\n\tconst descriptors = Object.getOwnPropertyDescriptors(ext);\n\tdelete descriptors.constructor;\n\tif(target.extend__ instanceof Function){\n\t\ttarget.extend__(descriptors,ext);\n\t} else {\n\t\t// @ts-ignore\n\t\tObject.defineProperties(target,descriptors);\n\t}\n\treturn target;\n};\nimport {accessor as imba_accessor} from 'imba';\nvar $1 = Symbol('num_a'), $2 = Symbol(), $3 = Symbol('num_b'), $4 = Symbol(), $5 = Symbol(), $7, $8;\nconst $__init__$ = Symbol.for('#__init__'), $__patch__$ = Symbol.for('#__patch__'), $__initor__$ = Symbol.for('#__initor__'), $__inited__$ = Symbol.for('#__inited__'), $__hooks__$ = Symbol.for('#__hooks__');\n\n/*body*/\nimport setup from './setup';\n\nclass Item extends OP.Object {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $6;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($6 = $$.num_a) !== undefined && this.ααnum_a.$init($6,this,$1,'num_a',$$);\n\t\tfields && ($6 = $$.num_b) !== undefined && this.ααnum_b.$init($6,this,$3,'num_b',$$);\n\t\t\n\t}\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();this[$__initor__$]===$5 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααnum_a.$init($$ ? $$.num_a : undefined,this,$1,'num_a',$$);\n\t\tfields && this.ααnum_b.$init($$ ? $$.num_b : undefined,this,$3,'num_b',$$);\n\t\t\n\t}\n\tset num_a(val){ this.ααnum_a.$set(val,this,$1,'num_a') }\n\tget num_a(){ return this.ααnum_a.$get(this,$1,'num_a') }\n\tget ααnum_a(){ return this[$2] || imba_accessor(($7 = this.αnumber(),$7),this,$1,'num_a',$2,Item.prototype) }\n\tset num_b(val){ this.ααnum_b.$set(val,this,$3,'num_b') }\n\tget num_b(){ return this.ααnum_b.$get(this,$3,'num_b') }\n\tget ααnum_b(){ return this[$4] || imba_accessor(($8 = this.αnumber(),$8),this,$3,'num_b',$4,Item.prototype) }\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $5;defineName$__(this,'Item');inheritClass$__(this);}\n};\n\nawait setup(__filename,{\n\tdata: [\n\t\t{id: 'item01',num_a: 1,num_b: 1},\n\t\t{id: 'item02',num_a: 1,num_b: 2},\n\t\t{id: 'item03',num_a: 2,num_b: 1},\n\t\t{id: 'item04',num_a: 2,num_b: 2},\n\t\t{id: 'item05',num_a: 3,num_b: 3}\n\t]\n});\n\nclass ΩArray {\n\t\n\tget rich(){\n\t\t\n\t\treturn this.map(function(_0) { return OP.get(_0); });\n\t}\n\tstatic {\n\t\tdefineName$__(this,'Array');}\n};\nextend$__(Array.prototype,ΩArray.prototype);\n;\n\ntest(\"filter 1\",async function() {\n\t\n\tlet items;\n\t\n\tok(Item.all().length,0);\n\t\n\titems = await Item.filter({num_a: 0});\n\tok(items.length,0);\n\tok([],items);\n\t\n\tok(Item.all().length,0);\n\t\n\titems = await Item.filter({num_a: 1});\n\tok(items.length,2);\n\tok(['item01','item02'].rich,items);\n\t\n\tok(Item.all().length,2);\n\t\n\titems = await Item.filter({num_a: 2});\n\tok(items.length,2);\n\tok(['item03','item04'].rich,items);\n\t\n\tok(Item.all().length,4);\n\t\n\titems = await Item.filter({num_a: 3});\n\tok(items.length,1);\n\tok(['item05'].rich,items);\n\t\n\treturn ok(Item.all().length,5);\n});\n\ntest(\"filter 2\",async function() {\n\t\n\tlet items;\n\t\n\titems = await Item.filter({num_a: 1,num_b: 0});\n\tok(items.length,0);\n\tok([],items);\n\t\n\titems = await Item.filter({num_a: 1,num_b: 1});\n\tok(items.length,1);\n\tok(['item01'].rich,items);\n\t\n\titems = await Item.filter({num_a: 1,num_b: 2});\n\tok(items.length,1);\n\tok(['item02'].rich,items);\n\t\n\titems = await Item.filter({num_a: 2,num_b: 1});\n\tok(items.length,1);\n\tok(['item03'].rich,items);\n\t\n\titems = await Item.filter({num_a: 2,num_b: 2});\n\tok(items.length,1);\n\tok(['item04'].rich,items);\n\t\n\titems = await Item.filter({num_a: 3,num_b: 3});\n\tok(items.length,1);\n\tok(['item05'].rich,items);\n\t\n\treturn ok(Item.all().length,5);\n});\n","dependencies":[],"map":{"version":3,"file":"filter.test.js","sourceRoot":"","sources":["/Users/sindre/repos/scrimba/op/test/filter.test.imba"],"sourcesContent":["import setup from './setup'\n\nclass Item < OP.Object\n\tnum_a @number\n\tnum_b @number\n\nawait setup __filename, {\n\tdata: [\n\t\t{id: 'item01', num_a:1, num_b:1}\n\t\t{id: 'item02', num_a:1, num_b:2}\n\t\t{id: 'item03', num_a:2, num_b:1}\n\t\t{id: 'item04', num_a:2, num_b:2}\n\t\t{id: 'item05', num_a:3, num_b:3}\n\t]\n}\n\nextend class Array\n\tget rich\n\t\tmap do OP.get($1)\n\ntest \"filter 1\" do\n\tlet items\n\n\tok Item.all!.length, 0\n\n\titems = await Item.filter(num_a:0)\n\tok items.length, 0\n\tok [], items\n\n\tok Item.all!.length, 0\n\n\titems = await Item.filter(num_a:1)\n\tok items.length, 2\n\tok ['item01', 'item02'].rich, items\n\n\tok Item.all!.length, 2\n\n\titems = await Item.filter(num_a:2)\n\tok items.length, 2\n\tok ['item03', 'item04'].rich, items\n\n\tok Item.all!.length, 4\n\n\titems = await Item.filter(num_a:3)\n\tok items.length, 1\n\tok ['item05'].rich, items\n\n\tok Item.all!.length, 5\n\ntest \"filter 2\" do\n\tlet items\n\n\titems = await Item.filter(num_a:1,num_b:0)\n\tok items.length, 0\n\tok [], items\n\n\titems = await Item.filter(num_a:1,num_b:1)\n\tok items.length, 1\n\tok ['item01'].rich, items\n\n\titems = await Item.filter(num_a:1,num_b:2)\n\tok items.length, 1\n\tok ['item02'].rich, items\n\n\titems = await Item.filter(num_a:2,num_b:1)\n\tok items.length, 1\n\tok ['item03'].rich, items\n\n\titems = await Item.filter(num_a:2,num_b:2)\n\tok items.length, 1\n\tok ['item04'].rich, items\n\n\titems = await Item.filter(num_a:3,num_b:3)\n\tok items.length, 1\n\tok ['item05'].rich, items\n\n\tok Item.all!.length, 5\n"],"names":[],"mappings":"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"}},"css":{"code":""},"warnings":[],"errors":[]}
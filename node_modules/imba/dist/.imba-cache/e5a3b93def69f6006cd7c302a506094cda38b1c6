{"js":{"code":"function defineName$__(cls,name){\n\tObject.defineProperty(cls,\"name\",{value:name,configurable:true});\n};;\nfunction inheritClass$__(cls){\n\tObject.getPrototypeOf(cls.prototype).constructor?.inherited?.(cls);\n};\nimport {accessor as imba_accessor} from 'imba';\nvar $1 = Symbol('score'), $2 = Symbol(), $3 = Symbol('rank'), $4 = Symbol(), $5 = Symbol(), $6 = Symbol('score'), $7 = Symbol(), $8 = Symbol('rank'), $9 = Symbol(), $10 = Symbol('deep'), $11 = Symbol(), $12 = Symbol(), $13 = Symbol('name'), $14 = Symbol(), $15 = Symbol('owner'), $16 = Symbol(), $17 = Symbol(), $18 = Symbol('name'), $19 = Symbol(), $20 = Symbol('num'), $21 = Symbol(), $22 = Symbol('hub'), $23 = Symbol(), $24 = Symbol('strings'), $25 = Symbol(), $26 = Symbol('stats'), $27 = Symbol(), $28 = Symbol(), $30, $31, $33, $34, $35, $37, $38, $40, $41, $42, $43, $44;\nconst $__init__$ = Symbol.for('#__init__'), $__patch__$ = Symbol.for('#__patch__'), $__initor__$ = Symbol.for('#__initor__'), $__inited__$ = Symbol.for('#__inited__'), $__hooks__$ = Symbol.for('#__hooks__');\n\n/*body*/\nimport setup from '../setup';\n\nclass DeepStats extends OPObject {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $29;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($29 = $$.score) !== undefined && this.ααscore.$init($29,this,$1,'score',$$);\n\t\tfields && ($29 = $$.rank) !== undefined && this.ααrank.$init($29,this,$3,'rank',$$);\n\t\t\n\t}\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();this[$__initor__$]===$5 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααscore.$init($$ ? $$.score : undefined,this,$1,'score',$$);\n\t\tfields && this.ααrank.$init($$ ? $$.rank : undefined,this,$3,'rank',$$);\n\t\t\n\t}\n\tset score(val){ this.ααscore.$set(val,this,$1,'score') }\n\tget score(){ return this.ααscore.$get(this,$1,'score') }\n\tget ααscore(){ return this[$2] || imba_accessor(($30 = this.αnumber(),$30),this,$1,'score',$2,DeepStats.prototype) }\n\tset rank(val){ this.ααrank.$set(val,this,$3,'rank') }\n\tget rank(){ return this.ααrank.$get(this,$3,'rank') }\n\tget ααrank(){ return this[$4] || imba_accessor(($31 = this.αnumber(),$31),this,$3,'rank',$4,DeepStats.prototype) }\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $5;defineName$__(this,'DeepStats');inheritClass$__(this);}\n};\n\nclass Stats extends OPObject {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $32;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($32 = $$.score) !== undefined && this.ααscore.$init($32,this,$6,'score',$$);\n\t\tfields && ($32 = $$.rank) !== undefined && this.ααrank.$init($32,this,$8,'rank',$$);\n\t\tfields && ($32 = $$.deep) !== undefined && this.ααdeep.$init($32,this,$10,'deep',$$);\n\t\t\n\t}\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();this[$__initor__$]===$12 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααscore.$init($$ ? $$.score : undefined,this,$6,'score',$$);\n\t\tfields && this.ααrank.$init($$ ? $$.rank : undefined,this,$8,'rank',$$);\n\t\tfields && this.ααdeep.$init($$ ? $$.deep : undefined,this,$10,'deep',$$);\n\t\t\n\t}\n\tset score(val){ this.ααscore.$set(val,this,$6,'score') }\n\tget score(){ return this.ααscore.$get(this,$6,'score') }\n\tget ααscore(){ return this[$7] || imba_accessor(($33 = this.αnumber(),$33),this,$6,'score',$7,Stats.prototype) }\n\tset rank(val){ this.ααrank.$set(val,this,$8,'rank') }\n\tget rank(){ return this.ααrank.$get(this,$8,'rank') }\n\tget ααrank(){ return this[$9] || imba_accessor(($34 = this.αnumber(),$34),this,$8,'rank',$9,Stats.prototype) }\n\tset deep(val){ this.ααdeep.$set(val,this,$10,'deep') }\n\tget deep(){ return this.ααdeep.$get(this,$10,'deep') }\n\tget ααdeep(){ return this[$11] || imba_accessor(($35 = this.αembed(DeepStats),$35),this,$10,'deep',$11,Stats.prototype) }\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $12;defineName$__(this,'Stats');inheritClass$__(this);}\n};\n\nclass Hub extends OPObject {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $36;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($36 = $$.name) !== undefined && this.ααname.$init($36,this,$13,'name',$$);\n\t\tfields && ($36 = $$.owner) !== undefined && this.ααowner.$init($36,this,$15,'owner',$$);\n\t\t\n\t}\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();this[$__initor__$]===$17 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααname.$init($$ ? $$.name : undefined,this,$13,'name',$$);\n\t\tfields && this.ααowner.$init($$ ? $$.owner : undefined,this,$15,'owner',$$);\n\t\t\n\t}\n\tset name(val){ this.ααname.$set(val,this,$13,'name') }\n\tget name(){ return this.ααname.$get(this,$13,'name') }\n\tget ααname(){ return this[$14] || imba_accessor(($37 = this.αstring(),$37),this,$13,'name',$14,Hub.prototype) }\n\tset owner(val){ this.ααowner.$set(val,this,$15,'owner') }\n\tget owner(){ return this.ααowner.$get(this,$15,'owner') }\n\tget ααowner(){ return this[$16] || imba_accessor(($38 = this.αparent(OP.User),$38),this,$15,'owner',$16,Hub.prototype) }\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $17;defineName$__(this,'Hub');this.alias = 'h';\n\t\tinheritClass$__(this);}\n};\n\nexport class Scrim extends OPObject {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $39;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($39 = $$.name) !== undefined && this.ααname.$init($39,this,$18,'name',$$);\n\t\tfields && ($39 = $$.num) !== undefined && this.ααnum.$init($39,this,$20,'num',$$);\n\t\tfields && ($39 = $$.hub) !== undefined && this.ααhub.$init($39,this,$22,'hub',$$);\n\t\tfields && ($39 = $$.strings) !== undefined && this.ααstrings.$init($39,this,$24,'strings',$$);\n\t\tfields && ($39 = $$.stats) !== undefined && this.ααstats.$init($39,this,$26,'stats',$$);\n\t\t\n\t}\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();this[$__initor__$]===$28 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααname.$init($$ ? $$.name : undefined,this,$18,'name',$$);\n\t\tfields && this.ααnum.$init($$ ? $$.num : undefined,this,$20,'num',$$);\n\t\tfields && this.ααhub.$init($$ ? $$.hub : undefined,this,$22,'hub',$$);\n\t\tfields && this.ααstrings.$init($$ ? $$.strings : undefined,this,$24,'strings',$$);\n\t\tfields && this.ααstats.$init($$ ? $$.stats : undefined,this,$26,'stats',$$);\n\t\t\n\t}\n\tset name(val){ this.ααname.$set(val,this,$18,'name') }\n\tget name(){ return this.ααname.$get(this,$18,'name') }\n\tget ααname(){ return this[$19] || imba_accessor(($40 = this.αstring(),$40),this,$18,'name',$19,Scrim.prototype) }\n\tset num(val){ this.ααnum.$set(val,this,$20,'num') }\n\tget num(){ return this.ααnum.$get(this,$20,'num') }\n\tget ααnum(){ return this[$21] || imba_accessor(($41 = this.αnumber(),$41),this,$20,'num',$21,Scrim.prototype) }\n\tset hub(val){ this.ααhub.$set(val,this,$22,'hub') }\n\tget hub(){ return this.ααhub.$get(this,$22,'hub') }\n\tget ααhub(){ return this[$23] || imba_accessor(($42 = this.αref(Hub),$42),this,$22,'hub',$23,Scrim.prototype) }\n\t\n\tset strings(val){ this.ααstrings.$set(val,this,$24,'strings') }\n\tget strings(){ return this.ααstrings.$get(this,$24,'strings') }\n\tget ααstrings(){ return this[$25] || imba_accessor(($43 = this.αzset(String),$43),this,$24,'strings',$25,Scrim.prototype) }\n\tset stats(val){ this.ααstats.$set(val,this,$26,'stats') }\n\tget stats(){ return this.ααstats.$get(this,$26,'stats') }\n\tget ααstats(){ return this[$27] || imba_accessor(($44 = this.αembed(Stats),$44),this,$26,'stats',$27,Scrim.prototype) }\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $28;defineName$__(this,'Scrim');this.alias = 's';\n\t\tinheritClass$__(this);}\n};\n\nawait setup(__filename);\n\ntest.node(\"clone\",async function() {\n\t\n\tlet item = await Scrim.create({num: 3,stats: {deep: {rank: 2}}});\n\tlet clone = item.clone();\n\tok(clone instanceof Scrim);\n\tok(clone.unsavedΦ);\n\tok(clone.id != item.id);\n\tok(clone.num,3);\n\tok(clone.stats.deep.rank,2);\n\tawait clone.save();\n\treturn ok(clone.savedΦ);\n});\n","dependencies":[],"map":{"version":3,"file":"clone.node.test.js","sourceRoot":"","sources":["/Users/sindre/repos/scrimba/op/test/core/clone.node.test.imba"],"sourcesContent":["import setup from '../setup'\n\nclass DeepStats < OPObject\n\tscore @number\n\trank @number\n\nclass Stats < OPObject\n\tscore @number\n\trank @number\n\tdeep @embed(DeepStats)\n\nclass Hub < OPObject\n\tstatic alias = 'h'\n\tname @string\n\towner @parent(OP.User)\n\nexport class Scrim < OPObject\n\tstatic alias = 's'\n\tname @string\n\tnum @number\n\thub @ref(Hub)\n\n\tstrings @zset(String)\n\tstats @embed(Stats)\n\nawait setup(__filename)\n\ntest.node \"clone\" do\n\tlet item = await Scrim.create(num: 3, stats: {deep: {rank: 2}})\n\tlet clone = item.clone!\n\tok clone isa Scrim\n\tok clone.unsaved?\n\tok clone.id != item.id\n\tok clone.num,3\n\tok clone.stats.deep.rank,2\n\tawait clone.save!\n\tok clone.saved?\n"],"names":[],"mappings":"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"}},"css":{"code":""},"warnings":[],"errors":[]}
{"js":{"code":"function defineName$__(cls,name){\n\tObject.defineProperty(cls,\"name\",{value:name,configurable:true});\n};;\nfunction inheritClass$__(cls){\n\tObject.getPrototypeOf(cls.prototype).constructor?.inherited?.(cls);\n};\nimport {accessor as imba_accessor} from 'imba';\nvar $1 = Symbol('name'), $2 = Symbol(), $3 = Symbol('secret'), $4 = Symbol(), $5 = Symbol(), $7, $8;\nconst $__init__$ = Symbol.for('#__init__'), $__patch__$ = Symbol.for('#__patch__'), $__initor__$ = Symbol.for('#__initor__'), $__inited__$ = Symbol.for('#__inited__'), $__hooks__$ = Symbol.for('#__hooks__');\n\n/*body*/\nimport setup from '../setup';\n\nclass Item extends OP.Object {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $6;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($6 = $$.name) !== undefined && this.ααname.$init($6,this,$1,'name',$$);\n\t\tfields && ($6 = $$.secret) !== undefined && this.ααsecret.$init($6,this,$3,'secret',$$);\n\t\t\n\t}\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();this[$__initor__$]===$5 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααname.$init($$ ? $$.name : undefined,this,$1,'name',$$);\n\t\tfields && this.ααsecret.$init($$ ? $$.secret : undefined,this,$3,'secret',$$);\n\t\t\n\t}\n\tset name(val){ this.ααname.$set(val,this,$1,'name') }\n\tget name(){ return this.ααname.$get(this,$1,'name') }\n\tget ααname(){ return this[$2] || imba_accessor(($7 = this.αstring(),$7),this,$1,'name',$2,Item.prototype) }\n\tset secret(val){ this.ααsecret.$set(val,this,$3,'secret') }\n\tget secret(){ return this.ααsecret.$get(this,$3,'secret') }\n\tget ααsecret(){ return this[$4] || imba_accessor(($8 = this.αstring(),($8.hidden instanceof Function) ? $8.hidden() : ($8.hidden = true),$8),this,$3,'secret',$4,Item.prototype) }\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $5;defineName$__(this,'Item');inheritClass$__(this);}\n};\n\nclass User extends OP.User {\nstatic {\n\tdefineName$__(this,'User');inheritClass$__(this);}};\n\nawait setup(__filename);\n\ntest.node(\"hidden\",async function() {\n\t\n\tlet item = await Item.create({name: 'n',secret: 's'});\n\tlet user = await User.create();\n\t\n\tok(item.secret,'s');\n\tok(item.$fields.secret.hidden);\n\t\n\tlet dehydrated = item.dehydrateΞfor(user);\n\tok(dehydrated.name,'n');\n\treturn ok(dehydrated.secret,undefined);\n});\n","dependencies":[],"map":{"version":3,"file":"hidden.test.js","sourceRoot":"","sources":["/Users/sindre/repos/scrimba/op/test/modifiers/hidden.test.imba"],"sourcesContent":["import setup from '../setup'\n\nclass Item < OP.Object\n\tname @string\n\tsecret @string.hidden\n\nclass User < OP.User\n\nawait setup(__filename)\n\ntest.node \"hidden\" do\n\tlet item = await Item.create { name: 'n', secret: 's' }\n\tlet user = await User.create!\n\n\tok item.secret, 's'\n\tok item.$fields.secret.hidden\n\n\tlet dehydrated = item.dehydrate-for user\n\tok dehydrated.name, 'n'\n\tok dehydrated.secret, undefined\n"],"names":[],"mappings":";;;;;;;;;;;AAAA,MAAM,CAAC,KAAK,MAAM,UAAU;;AAE5B,KAAK,CAAC,IAAI,SAAG,EAAE,CAAC,MAAM,EAAA;qCAFtB;;;qBAGC,IAAI,CAAA;qBACJ,MAAM,CAAA;;EAJP;cAAA;;;EAAA;kDAAA;;sCAGC,IAAI;wCACJ,MAAM;;EAJP;KAGC,IAAI;KAAJ,IAAI;KAAJ,MAAI,gDAAC,OAAO,EAAA,uBADP,IAAI;KAET,MAAM;KAAN,MAAM;KAAN,QAAM,gDAAC,OAAO,EAAA,KAAC,MAAM,2BAAN,MAAM,EAAA,OAAN,MAAM,iCAFhB,IAAI;;;AAEY,CAAA;;AAEtB,KAAK,CAAC,IAAI,SAAG,EAAE,CAAC,IAAI;;;;MAEd,KAAK,CAAC,UAAU,CAAC;;AAEvB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAE,GAAA;;KAChB,IAAI,SAAS,IAAI,CAAC,MAAM,CAAC,CAAE,IAAI,EAAE,GAAG,CAAE,MAAM,EAAE,GAAG,CAAE,CAAA;KACnD,IAAI,SAAS,IAAI,CAAC,MAAM,EAAC;;CAE7B,EAAE,CAAC,IAAI,CAAC,MAAM,CAAE,GAAG,CAAA;CACnB,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAA;;KAEzB,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAA;CACxC,EAAE,CAAC,UAAU,CAAC,IAAI,CAAE,GAAG,CAAA;CACvB,OAAA,EAAE,CAAC,UAAU,CAAC,MAAM,CAAE,SAAS,CAAA;CAAA,CATvB;AAUT;"}},"css":{"code":""},"warnings":[],"errors":[]}
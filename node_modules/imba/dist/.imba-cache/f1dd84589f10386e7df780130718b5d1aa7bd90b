{"js":{"code":"function defineName$__(cls,name){\n\tObject.defineProperty(cls,\"name\",{value:name,configurable:true});\n};;\nfunction inheritClass$__(cls){\n\tObject.getPrototypeOf(cls.prototype).constructor?.inherited?.(cls);\n};;\nfunction decorate$__(decorators,target,key,desc){\n\tvar c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\tif (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\telse for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\treturn c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport {αcomputed as imba_αcomputed, use_hooks as imba_use_hooks, hooks as imba_hooks, accessor as imba_accessor} from 'imba';\n(imba_use_hooks());\nvar $1 = Symbol('score'), $2 = Symbol(), $3 = Symbol('rank'), $4 = Symbol(), $5 = Symbol(), $6 = Symbol('score'), $7 = Symbol(), $8 = Symbol('rank'), $9 = Symbol(), $10 = Symbol('deep'), $11 = Symbol(), $12 = Symbol(), $13 = Symbol('num'), $14 = Symbol(), $15 = Symbol('message'), $16 = Symbol(), $17 = Symbol(), $18 = Symbol('name'), $19 = Symbol(), $20 = Symbol('owner'), $21 = Symbol(), $22 = Symbol(), $23 = Symbol('name'), $24 = Symbol(), $25 = Symbol('num'), $26 = Symbol(), $27 = Symbol('hub'), $28 = Symbol(), $29 = Symbol('strings'), $30 = Symbol(), $31 = Symbol('stats'), $32 = Symbol(), $33 = Symbol('commits'), $34 = Symbol(), $35 = Symbol(), $36 = Symbol('body'), $37 = Symbol(), $38 = Symbol('scrim'), $39 = Symbol(), $40 = Symbol(), $42, $43, $45, $46, $47, $49, $50, $52, $53, $55, $56, $57, $58, $59, $60, $62, $63;\nconst $__init__$ = Symbol.for('#__init__'), $__patch__$ = Symbol.for('#__patch__'), $__initor__$ = Symbol.for('#__initor__'), $__inited__$ = Symbol.for('#__inited__'), $__hooks__$ = Symbol.for('#__hooks__');\n\n/*body*/\nimport setup from '../setup';\n\nclass DeepStats extends OPObject {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $41;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($41 = $$.score) !== undefined && this.ααscore.$init($41,this,$1,'score',$$);\n\t\tfields && ($41 = $$.rank) !== undefined && this.ααrank.$init($41,this,$3,'rank',$$);\n\t\t\n\t}\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();this[$__initor__$]===$5 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααscore.$init($$ ? $$.score : undefined,this,$1,'score',$$);\n\t\tfields && this.ααrank.$init($$ ? $$.rank : undefined,this,$3,'rank',$$);\n\t\t\n\t}\n\tset score(val){ this.ααscore.$set(val,this,$1,'score') }\n\tget score(){ return this.ααscore.$get(this,$1,'score') }\n\tget ααscore(){ return this[$2] || imba_accessor(($42 = this.αnumber(),$42),this,$1,'score',$2,DeepStats.prototype) }\n\tset rank(val){ this.ααrank.$set(val,this,$3,'rank') }\n\tget rank(){ return this.ααrank.$get(this,$3,'rank') }\n\tget ααrank(){ return this[$4] || imba_accessor(($43 = this.αnumber(),$43),this,$3,'rank',$4,DeepStats.prototype) }\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $5;defineName$__(this,'DeepStats');inheritClass$__(this);}\n};\n\nclass Stats extends OPObject {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $44;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($44 = $$.score) !== undefined && this.ααscore.$init($44,this,$6,'score',$$);\n\t\tfields && ($44 = $$.rank) !== undefined && this.ααrank.$init($44,this,$8,'rank',$$);\n\t\tfields && ($44 = $$.deep) !== undefined && this.ααdeep.$init($44,this,$10,'deep',$$);\n\t\t\n\t}\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();this[$__initor__$]===$12 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααscore.$init($$ ? $$.score : undefined,this,$6,'score',$$);\n\t\tfields && this.ααrank.$init($$ ? $$.rank : undefined,this,$8,'rank',$$);\n\t\tfields && this.ααdeep.$init($$ ? $$.deep : undefined,this,$10,'deep',$$);\n\t\t\n\t}\n\tset score(val){ this.ααscore.$set(val,this,$6,'score') }\n\tget score(){ return this.ααscore.$get(this,$6,'score') }\n\tget ααscore(){ return this[$7] || imba_accessor(($45 = this.αnumber(),$45),this,$6,'score',$7,Stats.prototype) }\n\tset rank(val){ this.ααrank.$set(val,this,$8,'rank') }\n\tget rank(){ return this.ααrank.$get(this,$8,'rank') }\n\tget ααrank(){ return this[$9] || imba_accessor(($46 = this.αnumber(),$46),this,$8,'rank',$9,Stats.prototype) }\n\tset deep(val){ this.ααdeep.$set(val,this,$10,'deep') }\n\tget deep(){ return this.ααdeep.$get(this,$10,'deep') }\n\tget ααdeep(){ return this[$11] || imba_accessor(($47 = this.αembed(DeepStats),$47),this,$10,'deep',$11,Stats.prototype) }\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $12;defineName$__(this,'Stats');inheritClass$__(this);}\n};\n\nclass Commit extends OPObject {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $48;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($48 = $$.num) !== undefined && this.ααnum.$init($48,this,$13,'num',$$);\n\t\tfields && ($48 = $$.message) !== undefined && this.ααmessage.$init($48,this,$15,'message',$$);\n\t\t\n\t}\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();this[$__initor__$]===$17 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααnum.$init($$ ? $$.num : undefined,this,$13,'num',$$);\n\t\tfields && this.ααmessage.$init($$ ? $$.message : undefined,this,$15,'message',$$);\n\t\t\n\t}\n\tset num(val){ this.ααnum.$set(val,this,$13,'num') }\n\tget num(){ return this.ααnum.$get(this,$13,'num') }\n\tget ααnum(){ return this[$14] || imba_accessor(($49 = this.αint(),$49),this,$13,'num',$14,Commit.prototype) }\n\tset message(val){ this.ααmessage.$set(val,this,$15,'message') }\n\tget message(){ return this.ααmessage.$get(this,$15,'message') }\n\tget ααmessage(){ return this[$16] || imba_accessor(($50 = this.αtext(),$50),this,$15,'message',$16,Commit.prototype) }\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $17;defineName$__(this,'Commit');inheritClass$__(this);}\n};\n\nclass Hub extends OPObject {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $51;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($51 = $$.name) !== undefined && this.ααname.$init($51,this,$18,'name',$$);\n\t\tfields && ($51 = $$.owner) !== undefined && this.ααowner.$init($51,this,$20,'owner',$$);\n\t\t\n\t}\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();this[$__initor__$]===$22 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααname.$init($$ ? $$.name : undefined,this,$18,'name',$$);\n\t\tfields && this.ααowner.$init($$ ? $$.owner : undefined,this,$20,'owner',$$);\n\t\t\n\t}\n\tset name(val){ this.ααname.$set(val,this,$18,'name') }\n\tget name(){ return this.ααname.$get(this,$18,'name') }\n\tget ααname(){ return this[$19] || imba_accessor(($52 = this.αstring(),$52),this,$18,'name',$19,Hub.prototype) }\n\tset owner(val){ this.ααowner.$set(val,this,$20,'owner') }\n\tget owner(){ return this.ααowner.$get(this,$20,'owner') }\n\tget ααowner(){ return this[$21] || imba_accessor(($53 = this.αparent(OP.User),$53),this,$20,'owner',$21,Hub.prototype) }\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $22;defineName$__(this,'Hub');this.alias = 'h';\n\t\tinheritClass$__(this);}\n};\n\nexport class Scrim extends OPObject {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $54;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($54 = $$.name) !== undefined && this.ααname.$init($54,this,$23,'name',$$);\n\t\tfields && ($54 = $$.num) !== undefined && this.ααnum.$init($54,this,$25,'num',$$);\n\t\tfields && ($54 = $$.hub) !== undefined && this.ααhub.$init($54,this,$27,'hub',$$);\n\t\tfields && ($54 = $$.strings) !== undefined && this.ααstrings.$init($54,this,$29,'strings',$$);\n\t\tfields && ($54 = $$.stats) !== undefined && this.ααstats.$init($54,this,$31,'stats',$$);\n\t\tfields && ($54 = $$.commits) !== undefined && this.ααcommits.$init($54,this,$33,'commits',$$);\n\t\t\n\t}\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();this[$__initor__$]===$35 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααname.$init($$ ? $$.name : undefined,this,$23,'name',$$);\n\t\tfields && this.ααnum.$init($$ ? $$.num : undefined,this,$25,'num',$$);\n\t\tfields && this.ααhub.$init($$ ? $$.hub : undefined,this,$27,'hub',$$);\n\t\tfields && this.ααstrings.$init($$ ? $$.strings : undefined,this,$29,'strings',$$);\n\t\tfields && this.ααstats.$init($$ ? $$.stats : undefined,this,$31,'stats',$$);\n\t\tfields && this.ααcommits.$init($$ ? $$.commits : undefined,this,$33,'commits',$$);\n\t\t\n\t}\n\tset name(val){ this.ααname.$set(val,this,$23,'name') }\n\tget name(){ return this.ααname.$get(this,$23,'name') }\n\tget ααname(){ return this[$24] || imba_accessor(($55 = this.αstring(),$55),this,$23,'name',$24,Scrim.prototype) }\n\tset num(val){ this.ααnum.$set(val,this,$25,'num') }\n\tget num(){ return this.ααnum.$get(this,$25,'num') }\n\tget ααnum(){ return this[$26] || imba_accessor(($56 = this.αnumber(),$56),this,$25,'num',$26,Scrim.prototype) }\n\tset hub(val){ this.ααhub.$set(val,this,$27,'hub') }\n\tget hub(){ return this.ααhub.$get(this,$27,'hub') }\n\tget ααhub(){ return this[$28] || imba_accessor(($57 = this.αref(Hub),$57),this,$27,'hub',$28,Scrim.prototype) }\n\t\n\tset strings(val){ this.ααstrings.$set(val,this,$29,'strings') }\n\tget strings(){ return this.ααstrings.$get(this,$29,'strings') }\n\tget ααstrings(){ return this[$30] || imba_accessor(($58 = this.αzset(String),$58),this,$29,'strings',$30,Scrim.prototype) }\n\tset stats(val){ this.ααstats.$set(val,this,$31,'stats') }\n\tget stats(){ return this.ααstats.$get(this,$31,'stats') }\n\tget ααstats(){ return this[$32] || imba_accessor(($59 = this.αembed(Stats),$59),this,$31,'stats',$32,Scrim.prototype) }\n\tset commits(val){ this.ααcommits.$set(val,this,$33,'commits') }\n\tget commits(){ return this.ααcommits.$get(this,$33,'commits') }\n\tget ααcommits(){ return this[$34] || imba_accessor(($60 = this.αembeds(Commit),$60),this,$33,'commits',$34,Scrim.prototype) }\n\t\n\tget hubowner(){\n\t\t\n\t\treturn this.hub?.owner;\n\t}\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $35;this.prototype[$__hooks__$] = imba_hooks;\n\t\tdefineName$__(this,'Scrim');this.alias = 's';\n\t\tdecorate$__([imba_αcomputed.bind([])],this.prototype,'hubowner',null);\n\t\tinheritClass$__(this);}\n};\n\nclass Note extends OPObject {\n\t[$__patch__$]($$ = {},fields = true){\n\t\tvar $61;\n\t\tsuper[$__patch__$] && super[$__patch__$]($$,fields);\n\t\tfields && ($61 = $$.body) !== undefined && this.ααbody.$init($61,this,$36,'body',$$);\n\t\tfields && ($61 = $$.scrim) !== undefined && this.ααscrim.$init($61,this,$38,'scrim',$$);\n\t\t\n\t}\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();this[$__initor__$]===$40 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tfields && this.ααbody.$init($$ ? $$.body : undefined,this,$36,'body',$$);\n\t\tfields && this.ααscrim.$init($$ ? $$.scrim : undefined,this,$38,'scrim',$$);\n\t\t\n\t}\n\tset body(val){ this.ααbody.$set(val,this,$36,'body') }\n\tget body(){ return this.ααbody.$get(this,$36,'body') }\n\tget ααbody(){ return this[$37] || imba_accessor(($62 = this.αtext(),$62),this,$36,'body',$37,Note.prototype) }\n\tset scrim(val){ this.ααscrim.$set(val,this,$38,'scrim') }\n\tget scrim(){ return this.ααscrim.$get(this,$38,'scrim') }\n\tget ααscrim(){ return this[$39] || imba_accessor(($63 = this.αref(Scrim),$63),this,$38,'scrim',$39,Note.prototype) }\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $40;defineName$__(this,'Note');inheritClass$__(this);}\n};\n\nlet nr = 10;\nawait setup(__filename,{data: {\n\ts01: {num: 1},\n\ts: async function() { return OP.$patch(await OP.db.insert((\"s0\" + (nr++)),{num: 1})); },\n\tcommit: async function() { return OP.$patch(await OP.db.insert((\"commit0\" + (nr++)),{num: 1})); }\n}});\n\ntest.node(\"create\",async function() {\n\t\n\tlet item = await Scrim.create();\n\treturn ok(!(item.unsavedΦ));\n});\n\ntest.node(\"recreate\",async function() {\n\t\n\tlet item = Scrim.get('s07');\n\tawait item;\n\tok(!(item.existsΦ));\n\tok(!(item.persistedΦ));\n\titem.name = \"Hello\";\n\t// Should this even be allowed on the web?\n\t// To get a non-existent item and try to create it?\n\tawait item.save();\n\t// item.name = \"Stuff\"\n\tok(item.existsΦ);\n\tok(item.persistedΦ);\n\treturn ok(item.$cloud.name,\"Hello\");\n});\n\ntest(\"zset\",async function({s: s}) {\n\t\n\tok(s.strings.size,0);\n\tok(s.num,1);\n\tawait s.$setraw({num: 2});\n\tok(s.num,2);\n\t\n\tawait s.$setraw({\"strings.one\": 100});\n\tok(s.$cloud.strings.one,100);\n\tok([...s.strings],[\"one\"]);\n\t\n\tawait s.$setraw({\"strings.two\": 150});\n\tok([...s.strings],[\"one\",\"two\"]);\n\t\n\t// Add third in between\n\tawait s.$setraw({\"strings.three\": 125});\n\tok([...s.strings],[\"one\",\"three\",\"two\"]);\n\t\n\t// Move middle to last\n\tawait s.$setraw({\"strings.three\": 175});\n\tok([...s.strings],[\"one\",\"two\",\"three\"]);\n\t\n\t// Remove first\n\tawait s.$setraw({\"strings.one\": null});\n\tok([...s.strings],[\"two\",\"three\"]);\n\t\n\t// Now manually do one of them\n\ts.strings.delete(\"two\");\n\tok(s.unsavedΦ);\n\t\n\tawait s.save();\n\tok(!(s.unsavedΦ));\n\tok([...s.strings],[\"three\"]);\n\t\n\t// Now add some of them again\n\tawait s.$setraw({\"strings.two\": 275,\"strings.one\": 100});\n\tok([...s.strings],[\"one\",\"three\",\"two\"]);\n\t\n\t// Fully replacing from server\n\tawait s.$setraw({strings: {four: 275}});\n\treturn ok([...s.strings],[\"four\"]);\n});\n\ntest(\"full init\",function() {\n\t\n\tlet s = Scrim.build({num: 4,strings: {a: 10,b: 30,c: 20}});\n\treturn ok([...s.strings,['a','c','b']]);\n});\n\ntest(\"embed\",async function() {\n\t\n\tlet s = Scrim.build({num: 4,stats: {score: 2}});\n\tok(s.stats.score,2);\n\tok(!(s.persistedΦ));\n\tawait s.save();\n\ts.stats.score = 4;\n\ts.stats.deep.score = 1;\n\tok(s.$cloud.stats.score,2);\n\tawait s.save();\n\t\n\tok(s.$cloud.stats.score,4);\n\tok(s.$cloud.stats.deep.score,1);\n\tawait s.$setraw({\"stats.score\": 6});\n\treturn ok(s.$cloud.stats.score,6);\n});\n\ntest(\"embed conflict\",async function() {\n\t\n\t// local change and change from db\n\tlet s = Scrim.build({num: 4,stats: {score: 2}});\n\tok(s.stats.score,2);\n\tawait s.save();\n\tawait s.$setraw({\"stats.score\": 3});\n\tok(s.stats.score,3);\n\t\n\ts.stats.score = 4;\n\t// TBD the remote change should not overwrite locals?\n\t// or maybe it should?\n\tawait s.$setraw({\"stats.score\": 5});\n\treturn ok(s.stats.score,5);\n});\n\ntest(\"embed deep\",async function() {\n\t\n\tlet s = Scrim.build({num: 4});\n\t// await s.save!\n\ts.stats.score = 1;\n\ts.stats.deep.score = 1;\n\t\n\tawait s.save();\n\t\n\tok(!(s.$cloud.stats.id));\n\tok(!(s.$cloud.stats.deep.id));\n\tok(s.$cloud.stats.score,1);\n\tok(s.$cloud.stats.deep.score,1);\n\t\n\tawait s.$setraw({\"stats.deep.rank\": 2});\n\tok(s.$cloud.stats.deep.rank,2);\n\treturn ok(s.stats.deep.rank,2);\n});\n\n// test resetting\ntest(\"resetting\",function({s: s}) {\n\t\n\tok(s.num,1);\n\tok(s.strings.size,0);\n\t\n\ts.num = 3;\n\ts.strings.add(\"one\");\n\tok(s.strings.size,1);\n\t\n\ts.$reset();\n\tok(s.num,1);\n\treturn ok(s.strings.size,0);\n});\n\ntest(\"updates\",async function({s: s}) {\n\t\n\tok(s.num,1);\n\tok(!(s.unsavedΦ));\n\ts.num = 2;\n\tok(s.unsavedΦ);\n\ts.strings.add(\"one\");\n\tawait s.save();\n\ts.strings.add(\"two\");\n\tawait s.save();\n\tok(!(s.unsavedΦ));\n\tok(s.$cloud.num,2);\n\treturn ok(s.$cloud.strings.two);\n});\n\ntest(\"@ref\",async function({s: s}) {\n\t\n\tlet h1 = await Hub.create();\n\tlet h2 = await Hub.create();\n\tok(!(s.hub));\n\ts.hub = h1;\n\tok(s.$plain.hub,h1.id);\n\tok(!(s.$cloud.hub));\n\tawait s.save();\n\tok(s.$cloud.hub,h1.id);\n\treturn;\n\t\n\t// Now set it back to null\n\ts.hub = null;\n\tawait s.save();\n\tok(!(s.$cloud.hub));\n\treturn ok(!(s.hub));\n});\n\ntest(\"embeds\",async function() {\n\t\n\tlet s = Scrim.build({num: 4,stats: {score: 2},commits: {\n\t\tcommit01: {message: 'a'}\n\t}});\n\tok(s.stats.score,2);\n\tawait s.save();\n\t\n\tlet a = s.commits.at(0);\n\t\n\tok(s.commits.size,1);\n\tok(a.message,'a');\n\t\n\t// Now add another one\n\tlet c = s.commits.add({message: 'b'});\n\tawait s.save();\n\tok(s.commits.size,2);\n\tok(s.$cloud.commits[c.$key].message,'b');\n\t\n\t// Add one from db\n\tawait s.$setraw({\"commits.commit03\": {message: 'c'}});\n\t\n\tok(s.commits.size,3);\n\tok(s.commits.get('commit03').message,'c');\n\t\n\tawait s.$setraw({\"commits.commit01.message\": 'a2'});\n\t\n\treturn ok(a.message,'a2');\n});\n\ntest(\"computed / observable\",async function() {\n\t\n\t\n\tlet h = await Hub.create();\n\tlet s = await Scrim.create({hub: h});\n\tlet u = await OP.User.create();\n\tok(!(s.hubowner));\n\tawait h.$setraw({owner: u.id});\n\tok(h.owner,u);\n\treturn ok(s.hubowner,u);\n});\n\n","dependencies":[],"map":{"version":3,"file":"basics.test.js","sourceRoot":"","sources":["/Users/sindre/repos/scrimba/op/test/core/basics.test.imba"],"sourcesContent":["import setup from '../setup'\n\nclass DeepStats < OPObject\n\tscore @number\n\trank @number\n\nclass Stats < OPObject\n\tscore @number\n\trank @number\n\tdeep @embed(DeepStats)\n\nclass Commit < OPObject\n\tnum @int\n\tmessage @text\n\nclass Hub < OPObject\n\tstatic alias = 'h'\n\tname @string\n\towner @parent(OP.User)\n\nexport class Scrim < OPObject\n\tstatic alias = 's'\n\tname @string\n\tnum @number\n\thub @ref(Hub)\n\n\tstrings @zset(String)\n\tstats @embed(Stats)\n\tcommits @embeds(Commit)\n\n\t@computed get hubowner\n\t\thub..owner\n\nclass Note < OPObject\n\tbody @text\n\tscrim @ref(Scrim)\n\nlet nr = 10\nawait setup(__filename, data: {\n\ts01: {num: 1}\n\ts: do OP.$patch(await OP.db.insert(\"s0{nr++}\",num: 1))\n\tcommit: do OP.$patch(await OP.db.insert(\"commit0{nr++}\",num: 1))\n})\n\ntest.node \"create\" do\n\tlet item = await Scrim.create!\n\tok !item.unsaved?\n\ntest.node \"recreate\" do\n\tlet item = Scrim.get('s07')\n\tawait item\n\tok !item.exists?\n\tok !item.persisted?\n\titem.name = \"Hello\"\n\t# Should this even be allowed on the web?\n\t# To get a non-existent item and try to create it?\n\tawait item.save!\n\t# item.name = \"Stuff\"\n\tok item.exists?\n\tok item.persisted?\n\tok item.$cloud.name,\"Hello\"\n\ntest \"zset\" do({s})\n\tok s.strings.size,0\n\tok s.num,1\n\tawait s.$setraw(num: 2)\n\tok s.num,2\n\n\tawait s.$setraw( \"strings.one\": 100)\n\tok s.$cloud.strings.one,100\n\tok [...s.strings],[\"one\"]\n\n\tawait s.$setraw( \"strings.two\": 150)\n\tok [...s.strings],[\"one\",\"two\"]\n\n\t# Add third in between\n\tawait s.$setraw( \"strings.three\": 125 )\n\tok [...s.strings],[\"one\",\"three\",\"two\"]\n\n\t# Move middle to last\n\tawait s.$setraw( \"strings.three\": 175 )\n\tok [...s.strings],[\"one\",\"two\",\"three\"]\n\n\t# Remove first\n\tawait s.$setraw( \"strings.one\": null )\n\tok [...s.strings],[\"two\",\"three\"]\n\n\t# Now manually do one of them\n\ts.strings.delete(\"two\")\n\tok s.unsaved?\n\n\tawait s.save!\n\tok !s.unsaved?\n\tok [...s.strings],[\"three\"]\n\n\t# Now add some of them again\n\tawait s.$setraw( \"strings.two\": 275, \"strings.one\": 100 )\n\tok [...s.strings],[\"one\",\"three\",\"two\"]\n\n\t# Fully replacing from server\n\tawait s.$setraw( strings: {four: 275})\n\tok [...s.strings],[\"four\"]\n\ntest \"full init\" do\n\tlet s = Scrim.build(num:4, strings: {a:10,b:30,c:20})\n\tok [...s.strings,['a','c','b']]\n\ntest \"embed\" do\n\tlet s = Scrim.build(num:4, stats: {score: 2})\n\tok s.stats.score,2\n\tok !s.persisted?\n\tawait s.save!\n\ts.stats.score = 4\n\ts.stats.deep.score = 1\n\tok s.$cloud.stats.score,2\n\tawait s.save!\n\n\tok s.$cloud.stats.score,4\n\tok s.$cloud.stats.deep.score,1\n\tawait s.$setraw(\"stats.score\": 6)\n\tok s.$cloud.stats.score,6\n\ntest \"embed conflict\" do\n\t# local change and change from db\n\tlet s = Scrim.build(num:4, stats: {score: 2})\n\tok s.stats.score,2\n\tawait s.save!\n\tawait s.$setraw(\"stats.score\": 3)\n\tok s.stats.score,3\n\n\ts.stats.score = 4\n\t# TBD the remote change should not overwrite locals?\n\t# or maybe it should?\n\tawait s.$setraw(\"stats.score\": 5)\n\tok s.stats.score,5\n\ntest \"embed deep\" do\n\tlet s = Scrim.build(num:4)\n\t# await s.save!\n\ts.stats.score = 1\n\ts.stats.deep.score = 1\n\n\tawait s.save!\n\n\tok !s.$cloud.stats.id\n\tok !s.$cloud.stats.deep.id\n\tok s.$cloud.stats.score,1\n\tok s.$cloud.stats.deep.score,1\n\n\tawait s.$setraw(\"stats.deep.rank\":2)\n\tok s.$cloud.stats.deep.rank,2\n\tok s.stats.deep.rank,2\n\n# test resetting\ntest \"resetting\" do({s})\n\tok s.num,1\n\tok s.strings.size,0\n\n\ts.num = 3\n\ts.strings.add(\"one\")\n\tok s.strings.size,1\n\n\ts.$reset!\n\tok s.num,1\n\tok s.strings.size,0\n\ntest \"updates\" do({s})\n\tok s.num,1\n\tok !s.unsaved?\n\ts.num = 2\n\tok s.unsaved?\n\ts.strings.add(\"one\")\n\tawait s.save!\n\ts.strings.add(\"two\")\n\tawait s.save!\n\tok !s.unsaved?\n\tok s.$cloud.num,2\n\tok s.$cloud.strings.two\n\ntest \"@ref\" do({s})\n\tlet h1 = await Hub.create!\n\tlet h2 = await Hub.create!\n\tok !s.hub\n\ts.hub = h1\n\tok s.$plain.hub,h1.id\n\tok !s.$cloud.hub\n\tawait s.save!\n\tok s.$cloud.hub,h1.id\n\treturn\n\n\t# Now set it back to null\n\ts.hub = null\n\tawait s.save!\n\tok !s.$cloud.hub\n\tok !s.hub\n\ntest \"embeds\" do\n\tlet s = Scrim.build(num:4, stats: {score: 2}, commits: {\n\t\tcommit01: {message: 'a'}\n\t})\n\tok s.stats.score,2\n\tawait s.save!\n\n\tlet a = s.commits.at(0)\n\n\tok s.commits.size,1\n\tok a.message,'a'\n\n\t# Now add another one\n\tlet c = s.commits.add(message: 'b')\n\tawait s.save!\n\tok s.commits.size,2\n\tok s.$cloud.commits[c.$key].message,'b'\n\n\t# Add one from db\n\tawait s.$setraw(\"commits.commit03\": {message: 'c'})\n\n\tok s.commits.size,3\n\tok s.commits.get('commit03').message,'c'\n\n\tawait s.$setraw(\"commits.commit01.message\": 'a2')\n\n\tok a.message,'a2'\n\ntest \"computed / observable\" do\n\n\tlet h = await Hub.create()\n\tlet s = await Scrim.create(hub: h)\n\tlet u = await OP.User.create()\n\tok !s.hubowner\n\tawait h.$setraw(owner: u.id)\n\tok h.owner,u\n\tok s.hubowner,u\n\n"],"names":[],"mappings":"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"}},"css":{"code":""},"warnings":[],"errors":[]}